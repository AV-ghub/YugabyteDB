```
–æ–¥–∏–Ω –Ω—é–∞–Ω—Å, —Ä–∞–±–æ—Ç–∞—é –Ω–∞ –º–∞—à–∏–Ω–µ, –≥–¥–µ –≤ –¥–æ–∫–µ—Ä–µ –µ—Å—Ç—å —Ä–∞–±–æ—Ç–∞—é—â–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å
–º–æ–∂–Ω–æ –∫–æ–¥ –∑–∞—á–∏—Å—Ç–∫–∏ –º–æ–µ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –Ω–µ —É–¥–∞–ª–∏—Ç –Ω–∏—á–µ–≥–æ –ª–∏—à–Ω–µ–≥–æ?
```
**–ö–æ–Ω–µ—á–Ω–æ!** –í–æ—Ç –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ —É–¥–∞–ª—è—Ç **—Ç–æ–ª—å–∫–æ –≤–∞—à–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã Yugabyte**, –Ω–µ —Ç—Ä–æ–≥–∞—è –æ—Å—Ç–∞–ª—å–Ω–æ–µ:

### üîí –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ (–±–µ–∑–æ–ø–∞—Å–Ω–æ –¥–ª—è –¥—Ä—É–≥–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤)

```bash
# 1. –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏ —É–¥–∞–ª—è–µ–º –¢–û–õ–¨–ö–û –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Å –∏–º–µ–Ω–∞–º–∏ –Ω–∞—á–∏–Ω–∞—é—â–∏–º–∏—Å—è –Ω–∞ "yugabyte"
docker ps -a --filter "name=^yugabyte" --format "{{.ID}} {{.Names}}" | while read id name; do
  echo "–£–¥–∞–ª—è—é –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä: $name ($id)"
  docker stop "$id" 2>/dev/null
  docker rm "$id" 2>/dev/null
done

# 2. –£–¥–∞–ª—è–µ–º —Ç–æ–º–∞, —Å–æ–∑–¥–∞–Ω–Ω—ã–µ Docker Compose –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
docker volume ls -q --filter "name=yugabyte" | xargs -r docker volume rm

# 3. –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¢–û–õ–¨–ö–û –≤–∞—à–∏ Docker Compose —Å–µ—Ç–∏
docker network ls --filter "name=yugabyte" --format "{{.ID}}" | xargs -r docker network rm 2>/dev/null

# 4. –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —É–¥–∞–ª–∏–ª–æ—Å—å —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω–æ–µ
echo "=== –û—Å—Ç–∞–ª–∏—Å—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã: ==="
docker ps -a --format "table {{.Names}}\t{{.Status}}\t{{.Ports}}"

echo "=== –û—Å—Ç–∞–ª–∏—Å—å —Ç–æ–º–∞: ==="
docker volume ls --format "table {{.Name}}\t{{.Driver}}"
```

### üéØ –¢–æ—á–µ—á–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø–æ —Ç–µ–≥–∞–º/–æ–±—Ä–∞–∑–∞–º

```bash
# –£–¥–∞–ª—è–µ–º –¢–û–õ–¨–ö–û –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º –æ–±—Ä–∞–∑–æ–º
docker ps -a --filter "ancestor=yugabytedb/yugabyte:latest" --format "{{.ID}}" | xargs -r docker rm -f

# –ò–ª–∏ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –ø—Ä–æ–µ–∫—Ç–∞ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ docker-compose —Å project name)
docker-compose -p yugabyte-prod down -v 2>/dev/null || true
```

### üìÅ –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –≤ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—Ä–µ–¥–µ

**–õ—É—á—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç** ‚Äî —Ä–∞–±–æ—Ç–∞—Ç—å –≤ **–æ—Ç–¥–µ–ª—å–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏** —Å **–æ—Ç–¥–µ–ª—å–Ω—ã–º –ø—Ä–æ–µ–∫—Ç–æ–º**:

```bash
# –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –∏–º–µ–Ω–µ–º –ø—Ä–æ–µ–∫—Ç–∞
mkdir ~/yb-cluster-test-$(date +%s) && cd $_

# –°–æ–∑–¥–∞–µ–º docker-compose.yml —Å –Ø–í–ù–´–ú –∏–º–µ–Ω–µ–º –ø—Ä–æ–µ–∫—Ç–∞
cat > .env << 'EOF'
COMPOSE_PROJECT_NAME=yb_test_$(date +%Y%m%d_%H%M%S)
EOF

# –¢–µ–ø–µ—Ä—å –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –±—É–¥—É—Ç –Ω–∞–∑—ã–≤–∞—Ç—å—Å—è yb_test_... –∏ –∏—Ö –ª–µ–≥–∫–æ —É–¥–∞–ª–∏—Ç—å
docker-compose up -d
```

### üõ°Ô∏è –°–∞–º—ã–π –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –º–µ—Ç–æ–¥: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ–≥–∏

–î–æ–±–∞–≤—å—Ç–µ —Ç–µ–≥ –∫–æ –≤—Å–µ–º –≤–∞—à–∏–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º Yugabyte:

```yaml
# –í docker-compose.yml –¥–æ–±–∞–≤–ª—è–µ–º:
services:
  yb-master:
    image: yugabytedb/yugabyte:latest
    container_name: yugabyte-master-${COMPOSE_PROJECT_NAME:-ybcluster}
    labels:
      - "managed_by=andrey_yugabyte_test"
      - "purpose=learning"
```

–¢–æ–≥–¥–∞ —É–¥–∞–ª–µ–Ω–∏–µ –±—É–¥–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω—ã–º:

```bash
# –£–¥–∞–ª—è–µ–º –¢–û–õ–¨–ö–û –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Å –≤–∞—à–∏–º–∏ —Ç–µ–≥–∞–º–∏
docker ps -a --filter "label=managed_by=andrey_yugabyte_test" --format "{{.ID}}" | xargs -r docker rm -f

# –ò–ª–∏ –≤—Å–µ, —Å–≤—è–∑–∞–Ω–Ω–æ–µ —Å —Ç–µ—Å—Ç–æ–º
docker system prune --filter "label=purpose=learning" --force
```

### ‚úÖ –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å, —á—Ç–æ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ (–ë–ï–ó –£–î–ê–õ–ï–ù–ò–Ø)
echo "=== –≠—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã: ==="
docker ps -a --filter "name=yugabyte" --format "table {{.ID}}\t{{.Names}}\t{{.Status}}\t{{.Image}}"

echo "=== –≠—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –ù–ï –±—É–¥—É—Ç –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã: ==="
docker ps -a --filter "name!=yugabyte" --format "table {{.Names}}\t{{.Image}}" | head -10
```

### üîß –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è –≤–∞—à–µ–≥–æ —Å–ª—É—á–∞—è (CentOS 7 + —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã)

```bash
# –¢–û–ß–ï–ß–ù–û–ï —É–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –∏–∑ –≤–∞—à–∏—Ö —Ç–µ—Å—Ç–æ–≤:
for container in $(docker ps -a --format "{{.Names}}" | grep -E "yugabyte[-_]"); do
  echo "–£–¥–∞–ª—è—é: $container"
  docker stop "$container" 2>/dev/null
  docker rm "$container" 2>/dev/null
done

# –£–¥–∞–ª—è–µ–º —Ç–æ–ª—å–∫–æ —Ç–æ–º–∞, —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –¥–ª—è yugabyte
for volume in $(docker volume ls -q | grep -i yugabyte); do
  echo "–£–¥–∞–ª—è—é —Ç–æ–º: $volume"
  docker volume rm "$volume" 2>/dev/null
done

# –ò–õ–ò –∏—Å–ø–æ–ª—å–∑—É–µ–º –≤—Ä–µ–º–µ–Ω–Ω—É—é –º–µ—Ç–∫—É (timestamp)
TIMESTAMP=$(date +%Y%m%d_%H%M%S)
COMPOSE_PROJECT_NAME="yb_${TIMESTAMP}"

# –í .env —Ñ–∞–π–ª–µ:
echo "COMPOSE_PROJECT_NAME=${COMPOSE_PROJECT_NAME}" > .env
# –¢–µ–ø–µ—Ä—å –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –±—É–¥—É—Ç: yb_20240131_143022_yb-master_1
# –ò —É–¥–∞–ª—è—é—Ç—Å—è –∫–æ–º–∞–Ω–¥–æ–π:
docker-compose -p "$COMPOSE_PROJECT_NAME" down -v
```

### üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –¥–ª—è –≤–∞—Å

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç –±–µ–∑–æ–ø–∞—Å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç:

```bash
#!/bin/bash
# safe_cleanup.sh - –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ Yugabyte –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

echo "=== –ë–ï–ó–û–ü–ê–°–ù–ê–Ø –û–ß–ò–°–¢–ö–ê YUGABYTE ==="
echo "1. –°–ø–∏—Å–æ–∫ –í–°–ï–• –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:"
docker ps -a --format "table {{.Names}}\t{{.Image}}\t{{.Status}}"

echo ""
echo "2. –ë—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã –¢–û–õ–¨–ö–û –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Å –∏–º–µ–Ω–∞–º–∏:"
echo "   - –ù–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è –Ω–∞ 'yugabyte'"
echo "   - –ù–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è –Ω–∞ 'yb_'"
echo "   - –°–æ–¥–µ—Ä–∂–∞—â–∏–µ 'yugabyte' –≤ –∏–º–µ–Ω–∏"

read -p "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –æ—á–∏—Å—Ç–∫—É? (y/N): " -n 1 -r
echo ""
if [[ $REPLY =~ ^[Yy]$ ]]; then
    # –£–¥–∞–ª—è–µ–º —Ç–æ–ª—å–∫–æ –ø–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º —à–∞–±–ª–æ–Ω–∞–º –∏–º–µ–Ω
    PATTERNS="yugabyte yb_ yb-tserver yb-master"
    
    for pattern in $PATTERNS; do
        echo "–£–¥–∞–ª—è—é –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Å '$pattern' –≤ –∏–º–µ–Ω–∏..."
        docker ps -a --filter "name=${pattern}" --format "{{.ID}}" | xargs -r docker rm -f 2>/dev/null
    done
    
    echo "–£–¥–∞–ª—è—é —Ç–æ–º–∞ Yugabyte..."
    docker volume ls -q | grep -i yugabyte | xargs -r docker volume rm 2>/dev/null
    
    echo "=== –û–ß–ò–°–¢–ö–ê –ó–ê–í–ï–†–®–ï–ù–ê ==="
    docker ps -a --format "table {{.Names}}\t{{.Image}}\t{{.Status}}"
else
    echo "–û—á–∏—Å—Ç–∫–∞ –æ—Ç–º–µ–Ω–µ–Ω–∞"
fi
```

**–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∫–∞–∫ `safe_cleanup.sh`, –¥–∞–π—Ç–µ –ø—Ä–∞–≤–∞: `chmod +x safe_cleanup.sh`**
