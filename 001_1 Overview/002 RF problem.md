```
# 1. –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ù–ï –æ—Å–Ω–æ–≤–Ω–æ–π TServer (–Ω–µ yb-tserver1!)
docker-compose stop yb-tserver2

# docker-compose ps
         Name                       Command                State                                                                       Ports
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
yugabyte_yb-master_1     /sbin/tini -- /home/yugaby ...   Up         10100/tcp, 11000/tcp, 12000/tcp, 5433/tcp, 6379/tcp, 0.0.0.0:7000->7000/tcp,:::7000->7000/tcp, 7100/tcp, 7200/tcp, 9000/tcp, 9042/tcp,
                                                                     9100/tcp
yugabyte_yb-tserver1_1   /sbin/tini -- /home/yugaby ...   Up         10100/tcp, 11000/tcp, 12000/tcp, 0.0.0.0:5433->5433/tcp,:::5433->5433/tcp, 6379/tcp, 7000/tcp, 7100/tcp, 7200/tcp, 9000/tcp, 9042/tcp,
                                                                     9100/tcp
yugabyte_yb-tserver2_1   /sbin/tini -- /home/yugaby ...   Up         10100/tcp, 11000/tcp, 12000/tcp, 5433/tcp, 6379/tcp, 7000/tcp, 7100/tcp, 7200/tcp, 9000/tcp, 9042/tcp, 9100/tcp
yugabyte_yb-tserver3_1   /sbin/tini -- /home/yugaby ...   Exit 143

# docker exec yugabyte_yb-tserver1_1 ysqlsh -U yugabyte -c "SELECT * FROM test_success;"
–≤–∏—Å–∏—Ç –≤–µ—á–Ω–æ
```
–≠—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è! –ö–æ–≥–¥–∞ **–æ–¥–∏–Ω TServer —É–º–∏—Ä–∞–µ—Ç (Exit 143)**, –∞ **–æ—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–µ –æ—Ç–≤–µ—á–∞—é—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã**, —ç—Ç–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ø—Ä–æ–±–ª–µ–º—É —Å **–∫–≤–æ—Ä—É–º–æ–º —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏**.

### üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞: —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç?

**Exit 143** = –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ–ª—É—á–∏–ª SIGTERM –∏ –∑–∞–≤–µ—Ä—à–∏–ª—Å—è. –ù–æ –ø—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ –æ—Å—Ç–∞–≤—à–∏–µ—Å—è TServer'—ã –Ω–µ –º–æ–≥—É—Ç –æ–±—Å–ª—É–∂–∏–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã. 

–î–∞–≤–∞–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–ª–∞—Å—Ç–µ—Ä–∞:

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –º–∞—Å—Ç–µ—Ä-—É–∑–ª–∞
docker exec yugabyte_yb-master_1 yb-admin --master_addresses yb-master:7100 list_all_masters

# 2. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–ø–∏—Å–æ–∫ TServer'–æ–≤
docker exec yugabyte_yb-master_1 yb-admin --master_addresses yb-master:7100 list_all_tablet_servers

# 3. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–∞–±–ª–∏—Ü—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
docker exec yugabyte_yb-master_1 yb-admin --master_addresses yb-master:7100 list_tables | grep -i trans

# 4. –°–º–æ—Ç—Ä–∏–º –ª–æ–≥–∏ –∂–∏–≤—ã—Ö TServer'–æ–≤
docker-compose logs yb-tserver1 --tail 20
docker-compose logs yb-tserver2 --tail 20

# 5. –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –ª–∏–¥–µ—Ä —É —Ç–∞–±–ª–µ—Ç–æ–≤
docker exec yugabyte_yb-master_1 yb-admin --master_addresses yb-master:7100 list_tablets | head -10
```

### üéØ –ü—Ä–æ–±–ª–µ–º–∞: replication_factor=1 + 3 TServer

**–í–æ—Ç –∫–ª—é—á–µ–≤–∞—è –ø—Ä–æ–±–ª–µ–º–∞!** –£ –≤–∞—Å –∫–æ–Ω—Ñ–ª–∏–∫—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π:

1. **`replication_factor=1`** –≤ –∫–æ–Ω—Ñ–∏–≥–µ –º–∞—Å—Ç–µ—Ä–∞  
   ‚Üí –î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ **1 –∫–æ–ø–∏–∏**
   
2. **–ù–æ —É –≤–∞—Å 3 TServer**  
   ‚Üí –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã (–≤–∫–ª—é—á–∞—è `transactions_system`) —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –ø–æ –≤—Å–µ–º TServer

3. **–ö–æ–≥–¥–∞ 1 TServer —É–º–∏—Ä–∞–µ—Ç**  
   ‚Üí –ß–∞—Å—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞
   ‚Üí –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –Ω–∞—á–∞—Ç—å –Ω–æ–≤—É—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
   ‚Üí –ó–∞–ø—Ä–æ—Å—ã "–∑–∞–≤–∏—Å–∞—é—Ç"

### üîß –†–µ—à–µ–Ω–∏–µ: –¥–≤–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–∞

**–í–∞—Ä–∏–∞–Ω—Ç 1: –£–º–µ–Ω—å—à–∞–µ–º –¥–æ 1 TServer (–¥–ª—è —Ç–µ—Å—Ç–æ–≤ —Å RF=1)**

```yaml
# –í docker-compose.yml –æ—Å—Ç–∞–≤–ª—è–µ–º –¢–û–õ–¨–ö–û:
services:
  yb-master:
    # ... —Å replication_factor=1
  
  yb-tserver1:
    # ... —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω TServer
# yb-tserver2 –∏ yb-tserver3 —É–¥–∞–ª—è–µ–º
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –ú–µ–Ω—è–µ–º –Ω–∞ replication_factor=3 (–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å)**

```yaml
# –ú–µ–Ω—è–µ–º –≤ –∫–æ–Ω—Ñ–∏–≥–µ –º–∞—Å—Ç–µ—Ä–∞:
yb-master:
  command:
    - "--replication_factor=3"  # –ú–µ–Ω—è–µ–º —Å 1 –Ω–∞ 3
```

**–ò –∑–∞–ø—É—Å–∫–∞–µ–º –í–°–ï 3 TServer –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ** ‚Äî —Ç–æ–≥–¥–∞ –¥–∞–Ω–Ω—ã–µ —Ä–µ–ø–ª–∏—Ü–∏—Ä—É—é—Ç—Å—è –≤ 3 –∫–æ–ø–∏–∏.

### üöÄ –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π —Å–∏—Ç—É–∞—Ü–∏–∏

```bash
# 1. –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –º–µ—Ä—Ç–≤—ã–π TServer
docker-compose start yb-tserver3

# 2. –ñ–¥–µ–º 30 —Å–µ–∫—É–Ω–¥
sleep 30

# 3. –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤—Å–µ –∂–∏–≤—ã
docker-compose ps

# 4. –ú–µ–Ω—è–µ–º replication_factor –ù–ê –õ–ï–¢–£
docker exec yugabyte_yb-master_1 yb-admin --master_addresses yb-master:7100 modify_placement_info cloud1.region1.zone1,cloud1.region1.zone1,cloud1.region1.zone1 3

# 5. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º –∫–ª–∞—Å—Ç–µ—Ä –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
docker-compose restart
sleep 60

# 6. –¢–µ–ø–µ—Ä—å —Ç–µ—Å—Ç–∏—Ä—É–µ–º –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å
docker-compose stop yb-tserver2
sleep 10
psql -h localhost -p 5433 -U yugabyte -c "SELECT * FROM test_success;"
```

### üìä –ü—Ä–∞–≤–∏–ª–∞ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ YugabyteDB

| Replication Factor | –ú–∏–Ω–∏–º—É–º TServer | –ü–µ—Ä–µ–∂–∏–≤–∞–µ—Ç —Å–±–æ–µ–≤ | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|-------------------|-----------------|------------------|--------------|
| **RF=1** | 1 | 0 | –¢–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Å—Ç–æ–≤, –Ω–µ—Ç –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ |
| **RF=3** | 3 | 2 (–∏–∑ 3) | Production, –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å |
| **RF=5** | 5 | 4 (–∏–∑ 5) | –í—ã—Å–æ–∫–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å, multi-region |

### üí° –ü–æ—á–µ–º—É –∑–∞–ø—Ä–æ—Å "–≤–∏—Å–∏—Ç –≤–µ—á–Ω–æ"?

–ö–æ–≥–¥–∞ –≤—ã –≤—ã–ø–æ–ª–Ω—è–µ—Ç–µ `SELECT * FROM test_success;`:
1. YSQL –ø—ã—Ç–∞–µ—Ç—Å—è –Ω–∞—á–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
2. –ù—É–∂–µ–Ω –¥–æ—Å—Ç—É–ø –∫ —Ç–∞–±–ª–∏—Ü–µ `transactions_system`
3. –ï—Å–ª–∏ —á–∞—Å—Ç—å —Ä–µ–ø–ª–∏–∫ —ç—Ç–æ–π —Ç–∞–±–ª–∏—Ü—ã –Ω–∞ –º–µ—Ä—Ç–≤–æ–º TServer...
4. ...—Å–∏—Å—Ç–µ–º–∞ –∂–¥–µ—Ç –æ—Ç–≤–µ—Ç–∞ (—Ç–∞–π–º–∞—É—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ–ª–≥–∏–º)
5. –ó–∞–ø—Ä–æ—Å "–∑–∞–≤–∏—Å–∞–µ—Ç"

### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–µ—Å—Ç –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏

**–î–ª—è RF=3 (3 TServer):**
```bash
# –í—Å–µ 3 TServer —Ä–∞–±–æ—Ç–∞—é—Ç
docker-compose ps  # –î–æ–ª–∂–Ω—ã –±—ã—Ç—å 3 –≤ —Å—Ç–∞—Ç—É—Å–µ "Up"

# –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –õ–Æ–ë–û–ô 1 TServer
docker-compose stop yb-tserver2

# –ó–∞–ø—Ä–æ—Å—ã –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å!
psql -h localhost -p 5433 -U yugabyte -c "SELECT * FROM test_success;"

# –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –í–¢–û–†–û–ô TServer (–æ—Å—Ç–∞–µ—Ç—Å—è 1 –∏–∑ 3)
docker-compose stop yb-tserver3

# –¢–µ–ø–µ—Ä—å –∑–∞–ø—Ä–æ—Å—ã –ù–ï –î–û–õ–ñ–ù–´ —Ä–∞–±–æ—Ç–∞—Ç—å
# –ü–æ—Ç–æ–º—É —á—Ç–æ –ø–æ—Ç–µ—Ä—è–Ω–æ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Ä–µ–ø–ª–∏–∫
```
