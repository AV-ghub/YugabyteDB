```
–Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç
—Å–µ–π—á–∞—Å –≤–æ—Ç —Ç–∞–∫
andrey@andrey-VirtualBox:~/dcompose/yugabyte$ docker exec -it yugabyte-yb-tserver-n1-1 bash
[root@f215402faa69 yugabyte]# /home/yugabyte/bin/initdb -D /mnt/tserver/ysql_data
bash: /home/yugabyte/bin/initdb: No such file or directory
```
–ü–æ–Ω—è–ª –ø—Ä–æ–±–ª–µ–º—É! –í YugabyteDB **–Ω–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã `initdb`** ‚Äî YSQL –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ TServer —Å —Ñ–ª–∞–≥–æ–º `--enable_ysql=true`. 

–ü—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ –ª–∏–±–æ —Ñ–ª–∞–≥ –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è, –ª–∏–±–æ –µ—Å—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç –≤–µ—Ä—Å–∏–π/–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏. –î–∞–≤–∞–π—Ç–µ —Ä–µ—à–∏–º —ç—Ç–æ —Å–∏—Å—Ç–µ–º–Ω–æ.

### üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Ç–µ–∫—É—â–µ–π —Å–∏—Ç—É–∞—Ü–∏–∏

–°–Ω–∞—á–∞–ª–∞ –ø–æ—Å–º–æ—Ç—Ä–∏–º, —á—Ç–æ —Ä–µ–∞–ª—å–Ω–æ –∑–∞–ø—É—â–µ–Ω–æ –≤ TServer:

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏–º –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –≤ TServer
docker exec yugabyte-yb-tserver-n1-1 ps aux | grep yb-tserver

# 2. –ü–æ—Å–º–æ—Ç—Ä–∏–º –ø–æ–ª–Ω—ã–µ –ª–æ–≥–∏ TServer (–ø–µ—Ä–≤—ã–µ 50 —Å—Ç—Ä–æ–∫)
docker logs yugabyte-yb-tserver-n1-1 --tail 100 | grep -i "ysql\|enable\|starting"

# 3. –ü—Ä–æ–≤–µ—Ä–∏–º, —Å–ª—É—à–∞–µ—Ç –ª–∏ –ø–æ—Ä—Ç 5433 –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker exec yugabyte-yb-tserver-n1-1 netstat -tlnp | grep 5433
```

### üõ†Ô∏è –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ: –ø—Ä–æ—Å—Ç–æ–π –æ–¥–Ω–æ–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã–π –∫–ª–∞—Å—Ç–µ—Ä

–ü–æ—Å–∫–æ–ª—å–∫—É –º—É–ª—å—Ç–∏–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã–π –∫–ª–∞—Å—Ç–µ—Ä —É–ø–æ—Ä–Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –¥–∞–≤–∞–π—Ç–µ –≤–µ—Ä–Ω–µ–º—Å—è –∫ **–ø—Ä–æ—Å—Ç–æ–º—É –∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É —Å–ø–æ—Å–æ–±—É** ‚Äî –æ–¥–Ω–æ–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã–π `yugabyted` —Å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π –ø–∞–º—è—Ç—å—é:

```bash
# 1. –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏ —É–¥–∞–ª—è–µ–º —Ç–µ–∫—É—â–∏–π –∫–ª–∞—Å—Ç–µ—Ä
docker-compose down -v

# 2. –£–¥–∞–ª—è–µ–º –≤—Å–µ —Å—Ç–∞—Ä—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã Yugabyte
docker ps -aq --filter "ancestor=yugabytedb/yugabyte" | xargs -r docker rm -f

# 3. –ó–∞–ø—É—Å–∫–∞–µ–º –æ–¥–Ω–æ–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã–π –∫–ª–∞—Å—Ç–µ—Ä —Å —É–≤–µ–ª–∏—á–µ–Ω–Ω–æ–π –ø–∞–º—è—Ç—å—é
docker run -d \
  --name yb-single \
  -p 5433:5433 \
  -p 7000:7000 \
  -p 9000:9000 \
  --memory=3072m \
  --cpus=2 \
  yugabytedb/yugabyte:latest \
  bin/yugabyted start \
  --daemon=false \
  --ui=false \
  --background=false
```

**–ñ–¥–µ–º 2-3 –º–∏–Ω—É—Ç—ã** –¥–ª—è –ø–æ–ª–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏, –∑–∞—Ç–µ–º –ø—Ä–æ–≤–µ—Ä—è–µ–º:

```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
docker logs yb-single --tail 20 | grep -i "ysql\|started"

# –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è
psql -h localhost -p 5433 -U yugabyte -c "SELECT version();"
psql -h localhost -p 5433 -U yugabyte -c "CREATE TABLE test (id SERIAL PRIMARY KEY, name TEXT);"
```

### üìã –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π docker-compose.yml –Ω–∞ 2 —É–∑–ª–∞

–ï—Å–ª–∏ –Ω—É–∂–µ–Ω –∏–º–µ–Ω–Ω–æ –º—É–ª—å—Ç–∏—É–∑–ª–æ–≤–æ–π –∫–ª–∞—Å—Ç–µ—Ä, –≤–æ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–±–æ—á–∏–π –≤–∞—Ä–∏–∞–Ω—Ç:

```yaml
version: '3.8'

services:
  yb-master:
    image: yugabytedb/yugabyte:latest
    command:
      - "/home/yugabyte/bin/yb-master"
      - "--fs_data_dirs=/mnt/master"
      - "--master_addresses=yb-master:7100"
      - "--rpc_bind_addresses=yb-master:7100"
    mem_limit: 1024m

  yb-tserver:
    image: yugabytedb/yugabyte:latest
    command:
      - "/home/yugabyte/bin/yb-tserver"
      - "--fs_data_dirs=/mnt/tserver"
      - "--tserver_master_addrs=yb-master:7100"
      - "--rpc_bind_addresses=yb-tserver:9100"
      - "--enable_ysql=true"
      - "--ysql_enable_auth=false"
    ports:
      - "5433:5433"
      - "7000:7000"
    depends_on:
      - yb-master
    mem_limit: 2048m
```

–ó–∞–ø—É—Å–∫:
```bash
docker-compose down -v
docker-compose up -d
sleep 120  # –ñ–¥–µ–º 2 –º–∏–Ω—É—Ç—ã!
psql -h localhost -p 5433 -U yugabyte -c "SELECT version();"
```

### ‚ö†Ô∏è –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã –¥–ª—è —É—Å–ø–µ—Ö–∞

1. **–î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–∞–º—è—Ç–∏**: –ú–∏–Ω–∏–º—É–º 3 –ì–ë –¥–ª—è –æ–¥–Ω–æ–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω–æ–≥–æ, 1+2 –ì–ë –¥–ª—è –¥–≤—É—Ö–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω–æ–≥–æ.
2. **–û–∂–∏–¥–∞–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏**: –ü–æ—Å–ª–µ `docker-compose up -d` –∂–¥–∏—Ç–µ 1-2 –º–∏–Ω—É—Ç—ã.
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤**: –í—Å–µ–≥–¥–∞ —Å–º–æ—Ç—Ä–∏—Ç–µ `docker logs` –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫.
4. **–û–¥–∏–Ω –∫–ª–∞—Å—Ç–µ—Ä –∑–∞ —Ä–∞–∑**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–µ –∑–∞–ø—É—â–µ–Ω—ã –¥—Ä—É–≥–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã Yugabyte.

### üéØ –ß—Ç–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å

**–†–µ–∫–æ–º–µ–Ω–¥—É—é –Ω–∞—á–∞—Ç—å —Å –æ–¥–Ω–æ–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞** ‚Äî –æ–Ω —Ç–æ—á–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –ø–æ–∑–≤–æ–ª–∏—Ç –≤–∞–º –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∏–∑—É—á–µ–Ω–∏–µ. –ü–æ–∑–∂–µ, –∫–æ–≥–¥–∞ —Ä–∞–∑–±–µ—Ä–µ—Ç–µ—Å—å —Å –æ—Å–Ω–æ–≤–∞–º–∏, –º–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ –º—É–ª—å—Ç–∏—É–∑–ª–æ–≤–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ.
