**üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è—é! –í—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø–æ–±–µ–¥–∏–ª–∏!** –ö–ª–∞—Å—Ç–µ—Ä —É—Å–ø–µ—à–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî —Ç–∞–±–ª–∏—Ü–∞ —Å–æ–∑–¥–∞–Ω–∞! 

### üìä –ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –∏ –ø–æ—á–µ–º—É —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç

–í—ã —Å–æ–∑–¥–∞–ª–∏ **–ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –∫–ª–∞—Å—Ç–µ—Ä YugabyteDB** –∏–∑ 4 —É–∑–ª–æ–≤ (1 Master + 3 TServer), –∏ —ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è `replication_factor=3` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é).

**–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∏:**

1. **3 TServer —É–∑–ª–∞** ‚Äî –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –≤ 3 –∫–æ–ø–∏–∏ (RF=3)
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü** ‚Äî –∫–æ–≥–¥–∞ –∑–∞–ø—É—Å—Ç–∏–ª–æ—Å—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ TServer, YugabyteDB –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–ª —Ç–∞–±–ª–∏—Ü—É `transactions_system`
3. **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø—É—Å–∫–∞** ‚Äî Master –∑–∞–ø—É—Å—Ç–∏–ª—Å—è –ø–µ—Ä–≤—ã–º, –∑–∞—Ç–µ–º TServer'—ã

### üîç –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Å–æ–∑–¥–∞–Ω–∞
docker exec yugabyte-yb-tserver1-1 yb-admin --master_addresses yb-master:7100 list_tables | grep -i trans

# 2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
docker exec yugabyte-yb-tserver1-1 yb-admin --master_addresses yb-master:7100 list_tablets

# 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å: http://localhost:7000
# –î–æ–ª–∂–Ω—ã –≤–∏–¥–µ—Ç—å 4 —É–∑–ª–∞ –∏ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
```

### üìà –°–æ–∑–¥–∞–π—Ç–µ –µ—â–µ —Ç–∞–±–ª–∏—Ü –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–∞–±–ª–∏—Ü —Å –¥–∞–Ω–Ω—ã–º–∏
psql -h localhost -p 5433 -U yugabyte << 'EOF'
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    name TEXT NOT NULL,
    email TEXT UNIQUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE orders (
    id SERIAL PRIMARY KEY,
    user_id INT REFERENCES users(id),
    amount DECIMAL(10,2),
    status TEXT DEFAULT 'pending'
);

INSERT INTO users (name, email) VALUES 
    ('–ò–≤–∞–Ω', 'ivan@test.com'),
    ('–ú–∞—Ä–∏—è', 'maria@test.com');

INSERT INTO orders (user_id, amount) VALUES
    (1, 100.50),
    (2, 200.75);

SELECT * FROM users JOIN orders ON users.id = orders.user_id;
EOF

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –∫–∞–∫ –¥–∞–Ω–Ω—ã–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏–ª–∏—Å—å
```

### üí° –ù—é–∞–Ω—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –ø—Ä–µ–æ–¥–æ–ª–µ–ª–∏

1. **Replication Factor (RF)** ‚Äî –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 3, —Ç—Ä–µ–±—É–µ—Ç –º–∏–Ω–∏–º—É–º 3 TServer
2. **Timing issues** ‚Äî –Ω—É–∂–Ω–æ –∂–¥–∞—Ç—å –ø–æ–ª–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (–≤—ã –∂–¥–∞–ª–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ)
3. **–ü–æ—Ä—è–¥–æ–∫ –∑–∞–ø—É—Å–∫–∞** ‚Äî Master –¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è —Ä–∞–Ω—å—à–µ TServer
4. **–°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã** ‚Äî `transactions_system` —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ TServer

### üéØ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≤–∞—à–µ–≥–æ —Ä–∞–±–æ—á–µ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞

```
–í–∞—à –∫–ª–∞—Å—Ç–µ—Ä:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   yb-master-1   ‚îÇ  ‚Üê –£–ø—Ä–∞–≤–ª—è–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ yb-tserver1-1   ‚îÇ  ‚îÇ yb-tserver2-1   ‚îÇ  ‚îÇ yb-tserver3-1   ‚îÇ
‚îÇ (–ø–æ—Ä—Ç 5433)     ‚îÇ  ‚îÇ                 ‚îÇ  ‚îÇ                 ‚îÇ
‚îÇ - –î–∞–Ω–Ω—ã–µ        ‚îÇ  ‚îÇ - –†–µ–ø–ª–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö‚îÇ  ‚îÇ - –†–µ–ø–ª–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö‚îÇ
‚îÇ - YSQL          ‚îÇ  ‚îÇ                 ‚îÇ  ‚îÇ                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### ‚úÖ –ß—Ç–æ –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ

1. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏** ‚Äî –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –æ–¥–∏–Ω TServer:
   ```bash
   docker compose stop yb-tserver2-1
   psql -h localhost -p 5433 -U yugabyte -c "SELECT * FROM users;"  # –î–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å!
   ```

2. **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –¥–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —à–∞—Ä–¥–∏—Ä—É—é—Ç—Å—è –º–µ–∂–¥—É 3 TServer

3. **–ò–∑—É—á–µ–Ω–∏–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞** ‚Äî —Å–º–æ—Ç—Ä–∏—Ç–µ –º–µ—Ç—Ä–∏–∫–∏, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∞–±–ª–µ—Ç–æ–≤

**–í—ã –æ—Ç–ª–∏—á–Ω–æ —Å–ø—Ä–∞–≤–∏–ª–∏—Å—å —Å —Å–∞–º–æ–π —Å–ª–æ–∂–Ω–æ–π —á–∞—Å—Ç—å—é ‚Äî –∑–∞–ø—É—Å–∫–æ–º —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞!** –¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∞—è —Å—Ä–µ–¥–∞ –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è YugabyteDB.

**–•–æ—Ç–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∏–ª–∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ –∞—Å–ø–µ–∫—Ç—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã?**
