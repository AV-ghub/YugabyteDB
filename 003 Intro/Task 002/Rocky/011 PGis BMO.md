–í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –∫ –ø–ª–∞–Ω—É, –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É –ø–æ–¥ –ª–æ–∫–∞–ª—å–Ω—É—é —É—Å—Ç–∞–Ω–æ–≤–∫—É. –ü—Ä–æ—Ü–µ—Å—Å —Ç–µ–ø–µ—Ä—å –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–π—Ç–∏ –≥–æ—Ä–∞–∑–¥–æ –≥–ª–∞–∂–µ, —Ç–∞–∫ –∫–∞–∫:
1.  –£ –≤–∞—Å –µ—Å—Ç—å –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —Å–∏—Å—Ç–µ–º–æ–π (—Ä–∞–±–æ—Ç–∞—é—â–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ `dnf`).
2.  –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Å–µ—Ç–µ–π Docker –∏ –≤–µ—Ä—Å–∏–π GLIBC.
3.  –í—Å–µ —Ñ–∞–π–ª—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –Ω–∞ –æ–¥–Ω–æ–º —Ö–æ—Å—Ç–µ.

### üõ†Ô∏è –ü–ª–∞–Ω —É—Å—Ç–∞–Ω–æ–≤–∫–∏ PostGIS –≤ –ª–æ–∫–∞–ª—å–Ω—ã–π YugabyteDB

–í—ã–ø–æ–ª–Ω–∏—Ç–µ —à–∞–≥–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ. –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º, —á—Ç–æ YugabyteDB —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `~/yugabyte-2025.2.0.1` –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç.

#### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL 15 –∏ PostGIS –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ Rocky Linux

```bash
# 1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ PostgreSQL –∏ EPEL –¥–æ–±–∞–≤–ª–µ–Ω—ã (–≤–æ–∑–º–æ–∂–Ω–æ, –≤—ã —É–∂–µ —ç—Ç–æ –¥–µ–ª–∞–ª–∏)
sudo dnf install -y epel-release
sudo dnf install -y https://download.postgresql.org/pub/repos/yum/reporpms/EL-9-x86_64/pgdg-redhat-repo-latest.noarch.rpm

# 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ PostgreSQL 15 –∏ PostGIS 3.5
#    –ù–∞–º –Ω–µ –Ω—É–∂–µ–Ω —Å–µ—Ä–≤–µ—Ä PostgreSQL, —Ç–æ–ª—å–∫–æ —Ñ–∞–π–ª—ã (–±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è).
sudo dnf install -y postgresql15 postgis35_15
```

#### –®–∞–≥ 2: –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ PostGIS –≤ YugabyteDB

**–í–∞–∂–Ω–æ:** –ü–µ—Ä–µ–¥ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ–º –Ω—É–∂–Ω–æ **–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å** YugabyteDB.

```bash
# 1. –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –ø—É—Ç—å –∫ –≤–∞—à–µ–π —É—Å—Ç–∞–Ω–æ–≤–∫–µ YugabyteDB (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π –ø—É—Ç—å)
YUGABYTE_DIR=~/yugabyte-2025.2.0.1

# 2. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ YugabyteDB
$YUGABYTE_DIR/bin/yugabyted stop

# 3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (.so) –∏ —Ñ–∞–π–ª—ã —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π (.sql, .control) PostGIS
sudo cp -r /usr/pgsql-15/lib/postgis* $YUGABYTE_DIR/postgres/lib/
sudo cp -r /usr/share/pgsql-15/extension/postgis* $YUGABYTE_DIR/postgres/share/extension/

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ YugabyteDB –∑–∞–Ω–æ–≤–æ
$YUGABYTE_DIR/bin/yugabyted start --background=false
sleep 60  # –î–∞–π—Ç–µ –≤—Ä–µ–º—è –Ω–∞ –ø–æ–ª–Ω—ã–π –∑–∞–ø—É—Å–∫
```

#### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã PostGIS

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ YSQL –∏ —Å–æ–∑–¥–∞–π—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ
$YUGABYTE_DIR/bin/ysqlsh -h localhost -p 5433 -U yugabyte << 'EOF'
CREATE EXTENSION postgis;
SELECT PostGIS_Full_Version();
EOF
```

### ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏–µ

1.  **–û—à–∏–±–∫–∞: `libgeos_c.so.1: cannot open shared object file`**
    –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ YugabyteDB –Ω–µ –Ω–∞—à—ë–ª —Å–∏—Å—Ç–µ–º–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ PostGIS. –ò—Ö –Ω—É–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –µ–≥–æ –∫–∞—Ç–∞–ª–æ–≥ —Å–æ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–º–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏.
    ```bash
    # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ YugabyteDB –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ GEOS, PROJ, GDAL
    $YUGABYTE_DIR/bin/yugabyted stop
    sudo cp /usr/lib64/libgeos_c.so.1 $YUGABYTE_DIR/lib/yb-thirdparty/
    sudo cp /usr/lib64/libproj.so.25 $YUGABYTE_DIR/lib/yb-thirdparty/
    sudo cp /usr/lib64/libgdal.so.32 $YUGABYTE_DIR/lib/yb-thirdparty/
    # –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–Ω–æ–≤–∞ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ
    $YUGABYTE_DIR/bin/yugabyted start --background=false
    ```

2.  **–ü–∞–∫–µ—Ç `postgis35_15` –Ω–µ –Ω–∞–π–¥–µ–Ω**
    –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤–µ—Ä—Å–∏–∏: `sudo dnf search postgis`. –í–æ–∑–º–æ–∂–Ω–æ, –≤–∞–º –Ω—É–∂–µ–Ω `postgis34_15` –∏–ª–∏ `postgis33_15`. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–π.

3.  **–û—à–∏–±–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏**
    –ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ `sudo cp` –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å –≤ —Ü–µ–ª–µ–≤—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é. –ú–æ–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
    ```bash
    cp -r /usr/pgsql-15/lib/postgis* $YUGABYTE_DIR/postgres/lib/
    ```

### üìù –ß—Ç–æ –¥–∞–ª—å—à–µ?
–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ (`SELECT PostGIS_Full_Version();` –≤–µ—Ä–Ω—É–ª —Ä–µ–∑—É–ª—å—Ç–∞—Ç) –≤—ã –º–æ–∂–µ—Ç–µ:
*   **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏** PostGIS (—Å–æ–∑–¥–∞–Ω–∏–µ —Ç–æ—á–µ–∫, —Ä–∞—Å—á—ë—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–π).
*   **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–ª–∞—Å—Ç–µ—Ä –¥–ª—è production** (–¥–æ–±–∞–≤–∏—Ç—å —É–∑–ª—ã, –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é).
*   **–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ Docker**, –∏—Å–ø–æ–ª—å–∑—É—è —É—Å–ø–µ—à–Ω—ã–π –æ–ø—ã—Ç –ª–æ–∫–∞–ª—å–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ Dockerfile.

**–ù–∞—á–Ω–∏—Ç–µ —Å–æ –®–∞–≥–∞ 1.** –ï—Å–ª–∏ –Ω–∞ —ç—Ç–∞–ø–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–∞–∫–µ—Ç–æ–≤ –∏–ª–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –æ—à–∏–±–∫–∏ ‚Äî –ø—Ä–∏—à–ª–∏—Ç–µ —Ç–æ—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –∏ –º—ã –Ω–∞–π–¥—ë–º —Ä–µ—à–µ–Ω–∏–µ. –¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ –æ—Å–Ω–æ–≤–∞ —Å—Ç–∞–±–∏–ª—å–Ω–∞, —à–∞–Ω—Å—ã –Ω–∞ —É—Å–ø–µ—Ö –±–ª–∏–∑–∫–∏ –∫ 100%.

------------------------
----------------
--------------------

```
—Å–Ω–æ–≤–∞ –ø—Ä–æ–±–ª–µ–º–∞
yum install postgis35_15
Repository epel is listed more than once in the configuration
YugabyteDB                                                                                                                                                                    132  B/s | 255  B     00:01
Errors during downloading metadata for repository 'yugabyte':
  - Status code: 403 for https://releases.yugabyte.com/releases/latest/rocky/9/x86_64/repodata/repomd.xml (IP: 8.6.112.0)
Error: Failed to download metadata for repo 'yugabyte': Cannot download repomd.xml: Cannot download repodata/repomd.xml: All mirrors were tried
```
–≠—Ç–æ **–Ω–µ –ø—Ä–æ–±–ª–µ–º–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏**, –∞ –≤—Å–µ–≥–æ –ª–∏—à—å **–æ—à–∏–±–∫–∞ –≤ –æ–¥–Ω–æ–º –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤** (`yugabyte`), –∫–æ—Ç–æ—Ä—ã–π –º—ã –¥–æ–±–∞–≤–ª—è–ª–∏ —Ä–∞–Ω–µ–µ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —á–µ—Ä–µ–∑ `yum`. –û–Ω–∞ **–Ω–µ –ø–æ–º–µ—à–∞–µ—Ç** —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å PostGIS –∏–∑ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ (Rocky Linux, EPEL, PGDG).

–û—à–∏–±–∫–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –ø–æ—Ç–æ–º—É, —á—Ç–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π YugabyteDB –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 403), –Ω–æ `yum` –≤—Å—ë —Ä–∞–≤–Ω–æ –ø—ã—Ç–∞–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –µ–≥–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ. –≠—Ç—É –ø—Ä–æ–±–ª–µ–º—É –º–æ–∂–Ω–æ **–ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å** –∏–ª–∏ **–≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å** —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.

### üöÄ –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ PostGIS, –∏–≥–Ω–æ—Ä–∏—Ä—É—è –æ—à–∏–±–∫—É

–ü—Ä–æ—Å—Ç–æ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º —Ñ–ª–∞–≥–æ–º, —á—Ç–æ–±—ã `yum` –Ω–µ –æ–±—Ä–∞—â–∞–ª –≤–Ω–∏–º–∞–Ω–∏—è –Ω–∞ —Å–±–æ–π–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

```bash
sudo yum install postgis35_15 --disablerepo=yugabyte
```

–§–ª–∞–≥ `--disablerepo=yugabyte` –≥–æ–≤–æ—Ä–∏—Ç —Å–∏—Å—Ç–µ–º–µ –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è —ç—Ç–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–π–¥—ë—Ç –∏–∑ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Ä–∞–±–æ—á–∏—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ (PGDG, EPEL).

**–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –≤—ã–≤–æ–¥ –∫–æ–º–∞–Ω–¥—ã.** –í–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç —Å–ø–∏—Å–æ–∫ –ø–∞–∫–µ—Ç–æ–≤ –≤ —Ä–∞–∑–¥–µ–ª–µ **"Installing:"**. –ï—Å–ª–∏ —Ç–∞–º –µ—Å—Ç—å `postgis35_15` –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `postgresql15-libs`, `geos35`, `proj85`), –∞ –≤ —Ä–∞–∑–¥–µ–ª–µ **"Removing:"** –∏–ª–∏ **"Replacing:"** **–Ω–µ—Ç** –ø–∞–∫–µ—Ç–æ–≤ —Å `postgresql14`, —Ç–æ –º–æ–∂–Ω–æ —Å–º–µ–ª–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É (`y`).

### ‚öôÔ∏è –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –ü–æ—Å—Ç–æ—è–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç–µ —Å–±–æ–π–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç —ç—Ç–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞–≤—Å–µ–≥–¥–∞, –æ—Ç–∫–ª—é—á–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

```bash
sudo yum-config-manager --disable yugabyte
# –ó–∞—Ç–µ–º —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ PostGIS –∫–∞–∫ –æ–±—ã—á–Ω–æ
sudo yum install postgis35_15
```

### üí° –ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –ø–∞–∫–µ—Ç `postgis35_15` –Ω–µ –Ω–∞–π–¥–µ–Ω?

–ò–Ω–æ–≥–¥–∞ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è—Ö –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏ Rocky Linux –º–æ–∂–µ—Ç –±—ã—Ç—å –¥—Ä—É–≥–∞—è –≤–µ—Ä—Å–∏—è. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –∫–∞–∫–∏–µ –≤–µ—Ä—Å–∏–∏ PostGIS –¥–ª—è PostgreSQL 15 –¥–æ—Å—Ç—É–ø–Ω—ã:

```bash
sudo yum search postgis | grep 15
```

–ï—Å–ª–∏ `postgis35_15` –Ω–µ—Ç, –≤–æ–∑–º–æ–∂–Ω–æ, –µ—Å—Ç—å `postgis34_15` –∏–ª–∏ `postgis33_15`. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ç—É –≤–µ—Ä—Å–∏—é, –∫–æ—Ç–æ—Ä–∞—è –µ—Å—Ç—å.

### üõ†Ô∏è –ï—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ
–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º –ø–æ –ø–ª–∞–Ω—É:
1.  –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ YugabyteDB.
2.  –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã –∏–∑ `/usr/pgsql-15/lib/postgis*` –∏ `/usr/share/pgsql-15/extension/postgis*`.
3.  –ó–∞–ø—É—Å—Ç–∏—Ç–µ YugabyteDB –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ.

**–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É —Å `--disablerepo=yugabyte` –∏ —Å–æ–æ–±—â–∏—Ç–µ, —á—Ç–æ –ø–æ–∫–∞–∑–∞–ª `yum` –≤ —Å–ø–∏—Å–∫–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º—ã—Ö/—É–¥–∞–ª—è–µ–º—ã—Ö –ø–∞–∫–µ—Ç–æ–≤.**

---------------------------
---------------------------
-------------------------

```
–≤ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —á–∞—Ç–æ–≤ –ò–∑—É—á–µ–Ω–∏–µ YugabyteDB 001 –∏ –ò–∑—É—á–µ–Ω–∏–µ YugabyteDB 002
–∑–∞–∫–æ–Ω—á–∏–ª–æ—Å—å –æ—Ç–≤–µ–¥–µ–Ω–Ω–æ–µ –¥–ª—è —á–∞—Ç–∞ –º–µ—Å—Ç–æ

–ø—Ä–æ–¥–æ–ª–∂–∞–µ–º –¥–∞–ª—å—à–µ?

—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ —É—Å–ø–µ—à–Ω–æ, –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∏–∫–æ–≤ —Ç–æ–∂–µ
–∞ –≤–æ—Ç —Å —Å–æ–∑–¥–∞–Ω–∏–µ–º —Å–Ω–æ–≤–∞
yugabyte=# CREATE EXTENSION postgis;
ERROR:  could not load library "/_a/yugabyte-2025.2.0.1/postgres/lib/postgis-3.so": /_a/yugabyte-2025.2.0.1/postgres/lib/postgis-3.so: undefined symbol: CurrentMemoryContext

—á—Ç–æ-—Ç–æ –Ω–µ–¥–æ–∫–æ–ø–∏—Ä–æ–≤–∞–ª–∏
```

–ö–æ–Ω–µ—á–Ω–æ, –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º –Ω–∞ —Ä—É—Å—Å–∫–æ–º! üòä

–û—à–∏–±–∫–∞ `undefined symbol: CurrentMemoryContext` –æ—á–µ–Ω—å —Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω–∞—è ‚Äî —ç—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ **–Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –±–∏–Ω–∞—Ä–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤**. –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, —Ñ–∞–π–ª—ã `postgis-3.so` –±—ã–ª–∏ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –∏–∑ —Å–±–æ—Ä–∫–∏ –æ–±—ã—á–Ω–æ–≥–æ PostgreSQL, –∞ YugabyteDB –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–≤–æ—é —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é, –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é Postgres. –≠—Ç–∏ –¥–≤–µ –≤–µ—Ä—Å–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ä–∞–∑–Ω—ã–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–∞–º—è—Ç–∏, –ø–æ—ç—Ç–æ–º—É —Å–∏–º–≤–æ–ª `CurrentMemoryContext` –∏ –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è.

### üõ†Ô∏è –ü–ª–∞–Ω —Ä–µ—à–µ–Ω–∏—è

**–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å ‚Äî —Å–æ–±—Ä–∞—Ç—å PostGIS –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤ —Å—Ä–µ–¥–µ YugabyteDB.** –ü—Ä–æ—Å—Ç–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ "–≥–æ—Ç–æ–≤—ã—Ö" —Ñ–∞–π–ª–æ–≤ –∏–∑ –æ–±—ã—á–Ω–æ–≥–æ PostgreSQL –ø–æ—á—Ç–∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.

–í–æ—Ç –ø—Ä–∏–º–µ—Ä–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π (–º–æ–≥—É—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ –≤–∞—à—É –û–° –∏ –≤–µ—Ä—Å–∏–∏):

#### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å—Ä–µ–¥—ã YugabyteDB –¥–ª—è —Å–±–æ—Ä–∫–∏
*   –í–∞–º –Ω—É–∂–Ω—ã **–∏—Å—Ö–æ–¥–Ω—ã–µ –∫–æ–¥—ã YugabyteDB** –∏–ª–∏, –∫–∞–∫ –º–∏–Ω–∏–º—É–º, –µ–≥–æ –∑–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.
*   –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –ø—É—Ç—å –∫ –∏—Å—Ö–æ–¥–Ω–∏–∫–∞–º Postgres –≤–Ω—É—Ç—Ä–∏ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞ YugabyteDB. –û–±—ã—á–Ω–æ —ç—Ç–æ —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ: `/_a/yugabyte-2025.2.0.1/postgres` (—Å—É–¥—è –ø–æ –≤–∞—à–µ–º—É –ø—É—Ç–∏ –≤ –æ—à–∏–±–∫–µ).
*   –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ —Å–∏—Å—Ç–µ–º–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Å–±–æ—Ä–∫–∏ (`gcc`, `make`, `autoconf` –∏ —Ç.–¥.).

#### 2. –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤ PostGIS
*   –°–∫–∞—á–∞–π—Ç–µ –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ PostGIS, **–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –≤–µ—Ä—Å–∏–∏, —Å–æ–≤–º–µ—Å—Ç–∏–º–æ–π —Å –≤–∞—à–µ–π –≤–µ—Ä—Å–∏–µ–π Postgres –≤–Ω—É—Ç—Ä–∏ YugabyteDB** (—É–∑–Ω–∞—Ç—å –º–æ–∂–Ω–æ –∫–æ–º–∞–Ω–¥–æ–π –≤ `ysqlsh`: `SELECT version();`).
*   –ü—Ä–∏–º–µ—Ä –¥–ª—è –≤–µ—Ä—Å–∏–∏ 3.3.3:
    ```bash
    wget https://download.osgeo.org/postgis/source/postgis-3.3.3.tar.gz
    tar -xvzf postgis-3.3.3.tar.gz
    cd postgis-3.3.3
    ```

#### 3. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ —Å–±–æ—Ä–∫–∞ PostGIS
*   **–ö–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç**: –Ω—É–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å —Å–∏—Å—Ç–µ–º–µ —Å–±–æ—Ä–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `pg_config` –∏–∑ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞ YugabyteDB, –∞ –Ω–µ —Å–∏—Å—Ç–µ–º–Ω—ã–π.
    ```bash
    # –ù–∞–π–¥–∏—Ç–µ –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ pg_config YugabyteDB
    find /_a/yugabyte-2025.2.0.1 -name "pg_config"
    # –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, –ø—É—Ç—å: /_a/yugabyte-2025.2.0.1/postgres/bin/pg_config

    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º PostGIS, —è–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞—è –Ω—É–∂–Ω—ã–π pg_config
    ./configure --with-pgconfig=/_a/yugabyte-2025.2.0.1/postgres/bin/pg_config
    ```
*   –ï—Å–ª–∏ `configure` –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è —É—Å–ø–µ—à–Ω–æ, —Å–æ–±–∏—Ä–∞–µ–º –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º:
    ```bash
    make
    make install
    ```
    –ö–æ–º–∞–Ω–¥–∞ `make install` —Å–∫–æ–ø–∏—Ä—É–µ—Ç **–ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–æ–±—Ä–∞–Ω–Ω—ã–µ** —Ñ–∞–π–ª—ã —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è (–≤–∫–ª—é—á–∞—è `postgis-3.so`) –≤ –Ω—É–∂–Ω—ã–µ –∫–∞—Ç–∞–ª–æ–≥–∏ YugabyteDB.

#### 4. –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –≤ YSQL
*   –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–Ω–æ–≤–∞ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –±–∞–∑–µ `yugabyte` —á–µ—Ä–µ–∑ `ysqlsh` –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
    ```sql
    CREATE EXTENSION postgis;
    ```
    –ù–∞ —ç—Ç–æ—Ç —Ä–∞–∑ –∫–æ–º–∞–Ω–¥–∞ –¥–æ–ª–∂–Ω–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç—å—Å—è, —Ç–∞–∫ –∫–∞–∫ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –±—ã–ª–∞ —Å–æ–±—Ä–∞–Ω–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è –≤–∞—à–µ–π –≤–µ—Ä—Å–∏–∏ YugabyteDB.

### ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

*   **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: –î–ª—è —Å–±–æ—Ä–∫–∏ PostGIS –ø–æ—Ç—Ä–µ–±—É—é—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (`proj`, `geos`, `gdal`, `json-c`). –í–∞–º –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏—Ö —á–µ—Ä–µ–∑ –ø–∞–∫–µ—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –≤–∞—à–µ–π –û–° (–Ω–∞–ø—Ä–∏–º–µ—Ä, `apt-get install` –∏–ª–∏ `yum install`).
*   **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø—É—Ç—å**: –ï—Å–ª–∏ —Å–±–æ—Ä–∫–∞ –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤ –∫–∞–∂–µ—Ç—Å—è —Å–ª–æ–∂–Ω–æ–π, –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ª–∏ YugabyteDB –≥–æ—Ç–æ–≤—ã–π –ø–∞–∫–µ—Ç `postgis` –¥–ª—è —Å–≤–æ–µ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ `yum install yugabyte-postgis`). –û–¥–Ω–∞–∫–æ —Ç–∞–∫–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –µ—Å—Ç—å –Ω–µ –≤—Å–µ–≥–¥–∞.
*   **–í–µ—Ä—Å–∏–∏**: –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –≤–µ—Ä—Å–∏–π PostGIS –∏ YugabyteDB –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–∞. –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –æ—à–∏–±–∫–∏ –Ω–∞ —ç—Ç–∞–ø–µ `configure` –∏–ª–∏ `make`, —á–∞—Å—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –≤—ã–±—Ä–∞—Ç—å –±–æ–ª–µ–µ —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é PostGIS.

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –Ω–∞—á–∞—Ç—å —Å –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤ YugabyteDB –∏ PostGIS. –ï—Å–ª–∏ –Ω–∞ –∫–∞–∫–æ–º-—Ç–æ —ç—Ç–∞–ø–µ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ –Ω–∞–π–¥–µ—Ç—Å—è `pg_config` –∏–ª–∏ –±—É–¥—É—Ç –æ—à–∏–±–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π) ‚Äî –Ω–∞–ø–∏—à–∏—Ç–µ, –±—É–¥–µ–º —Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è –¥–∞–ª—å—à–µ –≤–º–µ—Å—Ç–µ. –£ –≤–∞—Å —É–∂–µ –µ—Å—Ç—å —Å–∞–º—ã–π –≤–∞–∂–Ω—ã–π –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç –¥–ª—è —É—Å–ø–µ—Ö–∞ ‚Äî —Ä–∞–±–æ—Ç–∞—é—â–∏–π YugabyteDB. –û—Å—Ç–∞–ª–æ—Å—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–æ–±—Ä–∞—Ç—å –¥–ª—è –Ω–µ–≥–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ. üí™


--------------------------------------------
-------------------------------------------
----------------------------------------


```
–Ω–µ —Å–æ–≤—Å–µ–º —É—Å–ø–µ—à–Ω–æ
./configure --with-pgconfig=/_a/yugabyte-2025.2.0.1/postgres/bin/pg_config

checking for PQserverVersion in -lpq... no
configure: error: could not find libpq
—ç—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ?
```

–î–∞, –æ—à–∏–±–∫–∞ **`could not find libpq`** –∫—Ä–∏—Ç–∏—á–Ω–∞. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ `configure` –Ω–∞—à–µ–ª –∑–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–π —Ñ–∞–π–ª `libpq-fe.h`, –Ω–æ –Ω–µ –º–æ–∂–µ—Ç –Ω–∞–π—Ç–∏ —Å–∞–º—É –±–∏–±–ª–∏–æ—Ç–µ–∫—É `libpq`. 

### üéØ –ü—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã
YugabyteDB –∏–º–µ–µ—Ç —Å–≤–æ–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –ø—É—Ç—è—Ö. `configure` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `libpq` —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏, –Ω–æ –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç –µ—ë, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫–∞—Ç–∞–ª–æ–≥–∞—Ö YugabyteDB.

### üîß –†–µ—à–µ–Ω–∏–µ
–ù—É–∂–Ω–æ **—è–≤–Ω–æ —É–∫–∞–∑–∞—Ç—å –ø—É—Ç–∏ –∫ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º YugabyteDB** —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º `configure`.

–í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã (–∞–¥–∞–ø—Ç–∏—Ä—É–π—Ç–µ –ø—É—Ç—å –∫ –≤–∞—à–µ–π —É—Å—Ç–∞–Ω–æ–≤–∫–µ YugabyteDB):

```bash
# –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º –ø—É—Ç–∏ –∫ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º YugabyteDB
export LD_LIBRARY_PATH=/_a/yugabyte-2025.2.0.1/postgres/lib:$LD_LIBRARY_PATH
export LIBRARY_PATH=/_a/yugabyte-2025.2.0.1/postgres/lib:$LIBRARY_PATH
export C_INCLUDE_PATH=/_a/yugabyte-2025.2.0.1/postgres/include:$C_INCLUDE_PATH

# –¢–µ–ø–µ—Ä—å –∑–∞–ø—É—Å–∫–∞–µ–º configure —Å —Ç–µ–º–∏ –∂–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
./configure --with-pgconfig=/_a/yugabyte-2025.2.0.1/postgres/bin/pg_config
```

**–ß—Ç–æ –¥–µ–ª–∞—é—Ç —ç—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**
* `LD_LIBRARY_PATH` - –ø—É—Ç—å –∫ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
* `LIBRARY_PATH` - –ø—É—Ç—å –∫ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º –≤–æ –≤—Ä–µ–º—è –ª–∏–Ω–∫–æ–≤–∫–∏ (–∫–æ–º–ø–æ–Ω–æ–≤–∫–∏)
* `C_INCLUDE_PATH` - –ø—É—Ç—å –∫ –∑–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–º —Ñ–∞–π–ª–∞–º

### üí° –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥
–ï—Å–ª–∏ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç, –º–æ–∂–Ω–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –±–æ–ª–µ–µ –ø—Ä—è–º–æ–π –º–µ—Ç–æ–¥ ‚Äî —É–∫–∞–∑–∞—Ç—å –ø—É—Ç—å –∫ `libpq` —á–µ—Ä–µ–∑ `pkg-config`:

```bash
# –£–∫–∞–∑—ã–≤–∞–µ–º pkg-config –≥–¥–µ –∏—Å–∫–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ libpq
export PKG_CONFIG_PATH=/_a/yugabyte-2025.2.0.1/postgres/lib/pkgconfig:$PKG_CONFIG_PATH

# –ó–∞—Ç–µ–º —Å–Ω–æ–≤–∞ –∑–∞–ø—É—Å–∫–∞–µ–º configure
./configure --with-pgconfig=/_a/yugabyte-2025.2.0.1/postgres/bin/pg_config
```

### ‚úÖ –ß—Ç–æ –¥–æ–ª–∂–Ω–æ –ø—Ä–æ–∏–∑–æ–π—Ç–∏
–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —ç—Ç–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è `configure` –¥–æ–ª–∂–µ–Ω:
1. –£—Å–ø–µ—à–Ω–æ –Ω–∞–π—Ç–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫—É `libpq`
2. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –¥—Ä—É–≥–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π PostGIS (GEOS, PROJ, GDAL –∏ —Ç.–¥.)
3. –ó–∞–≤–µ—Ä—à–∏—Ç—å—Å—è —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º `configure: success` –∏–ª–∏ –ø–æ–¥–æ–±–Ω—ã–º

### ‚ö†Ô∏è –í–∞–∂–Ω–æ–µ –∑–∞–º–µ—á–∞–Ω–∏–µ
–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ `configure` –∏ `make`, –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ `make install` –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –ø—Ä–∞–≤–∞ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Ç–∞–∫ –∫–∞–∫ —Ñ–∞–π–ª—ã –±—É–¥—É—Ç –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∫–∞—Ç–∞–ª–æ–≥–∏ YugabyteDB. –õ–∏–±–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `sudo`, –ª–∏–±–æ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å –≤ `/–∞/yugabyte-2025.2.0.1/postgres/`.

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ —Å–æ–æ–±—â–∏—Ç–µ, —á—Ç–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å. –ï—Å–ª–∏ –±—É–¥—É—Ç –¥–∞–ª—å—à–µ –æ—à–∏–±–∫–∏ ‚Äî –ø–æ—Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç.



------------------------
-----------------------
---------------------


```
–Ω–µ –ø–æ–º–æ–≥–ª–æ
checking for PQserverVersion in -lpq... no
configure: error: could not find libpq
```

–ü—Ä–æ–±–ª–µ–º–∞ –≥–ª—É–±–∂–µ ‚Äî `configure` –Ω–µ –≤–∏–¥–∏—Ç `libpq`, –¥–∞–∂–µ —Å –ø—É—Ç—è–º–∏. –î–∞–≤–∞–π—Ç–µ –ø–æ–π–¥—ë–º —Å–∏—Å—Ç–µ–º–Ω–æ.

### üîç –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∏–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ libpq –≤ YugabyteDB
```bash
# –ò—â–µ–º —Ñ–∞–π–ª libpq
find /_a/yugabyte-2025.2.0.1 -name "*libpq*" -type f

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –Ω—É–∂–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ postgres/lib
ls -la /_a/yugabyte-2025.2.0.1/postgres/lib/ | grep pq
```

**–ß—Ç–æ –æ–∂–∏–¥–∞–µ–º —É–≤–∏–¥–µ—Ç—å:**
- `libpq.so` (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞)
- `libpq.a` (—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞)
- –í–æ–∑–º–æ–∂–Ω–æ `libpq.so.5` –∏–ª–∏ –ø–æ–¥–æ–±–Ω—É—é –≤–µ—Ä—Å–∏—é

### üîß –®–∞–≥ 2: –°–æ–∑–¥–∞–¥–∏–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è pkg-config –≤—Ä—É—á–Ω—É—é
–ß–∞—Å—Ç–æ –≤ YugabyteDB –Ω–µ—Ç —Ñ–∞–π–ª–∞ `.pc` –¥–ª—è `pkg-config`. –°–æ–∑–¥–∞–¥–∏–º –µ–≥–æ:

```bash
# –°–æ–∑–¥–∞—ë–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç
mkdir -p /_a/yugabyte-2025.2.0.1/postgres/lib/pkgconfig

# –°–æ–∑–¥–∞—ë–º —Ñ–∞–π–ª libpq.pc
cat > /_a/yugabyte-2025.2.0.1/postgres/lib/pkgconfig/libpq.pc << EOF
prefix=/_a/yugabyte-2025.2.0.1/postgres
exec_prefix=\${prefix}
libdir=\${exec_prefix}/lib
includedir=\${prefix}/include

Name: libpq
Description: PostgreSQL client library
Version: 15.12
Requires:
Libs: -L\${libdir} -lpq
Cflags: -I\${includedir}
EOF

# –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º –ø—É—Ç—å
export PKG_CONFIG_PATH=/_a/yugabyte-2025.2.0.1/postgres/lib/pkgconfig:$PKG_CONFIG_PATH

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ pkg-config —Ç–µ–ø–µ—Ä—å –≤–∏–¥–∏—Ç libpq
pkg-config --libs libpq
pkg-config --cflags libpq
```

### üõ†Ô∏è –®–∞–≥ 3: –ü—Ä–æ–±—É–µ–º configure —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ —Ñ–ª–∞–≥–∞–º–∏
–ï—Å–ª–∏ pkg-config –∑–∞—Ä–∞–±–æ—Ç–∞–ª, –∏–ª–∏ –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–µ—Ç, –ø–æ–ø—Ä–æ–±—É–µ–º —è–≤–Ω–æ —É–∫–∞–∑–∞—Ç—å –ø—É—Ç–∏:

```bash
# –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
make distclean 2>/dev/null || rm -rf build 2>/dev/null

# –ó–∞–ø—É—Å–∫–∞–µ–º configure —Å —è–≤–Ω—ã–º —É–∫–∞–∑–∞–Ω–∏–µ–º –ø—É—Ç–µ–π
./configure \
  --with-pgconfig=/_a/yugabyte-2025.2.0.1/postgres/bin/pg_config \
  LDFLAGS="-L/_a/yugabyte-2025.2.0.1/postgres/lib -Wl,-rpath,/_a/yugabyte-2025.2.0.1/postgres/lib" \
  CPPFLAGS="-I/_a/yugabyte-2025.2.0.1/postgres/include" \
  LIBS="-lpq"
```

### ‚ö†Ô∏è –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏–º –≤–µ—Ä—Å–∏—é PostGIS –∏ YugabyteDB
–í–æ–∑–º–æ–∂–Ω–∞ –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –≤–µ—Ä—Å–∏–π. –ö–∞–∫–∞—è –≤–µ—Ä—Å–∏—è PostGIS —É –≤–∞—Å?
```bash
grep "PACKAGE_VERSION" configure.ac || grep "PACKAGE_VERSION" configure
```

### üîÑ –®–∞–≥ 5: –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥ ‚Äî —Ä—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–Ω–∫–æ–≤–∫–∏
–î–∞–≤–∞–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏–º, –º–æ–∂–µ–º –ª–∏ –º—ã –≤—Ä—É—á–Ω—É—é —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É:

```bash
# –°–æ–∑–¥–∞—ë–º –ø—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª
cat > test_libpq.c << EOF
#include <libpq-fe.h>
#include <stdio.h>

int main() {
    printf("libpq version: %d\n", PQlibVersion());
    return 0;
}
EOF

# –ü—Ä–æ–±—É–µ–º —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å
gcc test_libpq.c \
  -I/_a/yugabyte-2025.2.0.1/postgres/include \
  -L/_a/yugabyte-2025.2.0.1/postgres/lib \
  -lpq \
  -o test_libpq

# –ü—Ä–æ–±—É–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç—å
LD_LIBRARY_PATH=/_a/yugabyte-2025.2.0.1/postgres/lib:$LD_LIBRARY_PATH ./test_libpq
```

**–≠—Ç–æ—Ç —Ç–µ—Å—Ç –ø–æ–∫–∞–∂–µ—Ç:**
1. –ï—Å—Ç—å –ª–∏ —É –Ω–∞—Å –¥–æ—Å—Ç—É–ø –∫ `libpq-fe.h`
2. –ú–æ–∂–µ–º –ª–∏ –º—ã –ª–∏–Ω–∫–æ–≤–∞—Ç—å—Å—è —Å `-lpq`
3. –†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞

### üìù –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç
–í–æ–∑–º–æ–∂–Ω—ã –¥–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞:

1. **–í YugabyteDB –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω–µ—Ç libpq** ‚Äî –Ω–æ —ç—Ç–æ –º–∞–ª–æ–≤–µ—Ä–æ—è—Ç–Ω–æ, —Ç–∞–∫ –∫–∞–∫ —ç—Ç–æ –±–∞–∑–æ–≤–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
2. **–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∏–º–µ–µ—Ç –¥—Ä—É–≥–æ–µ –∏–º—è** ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, `libyb_pq.so`

–í—ã–ø–æ–ª–Ω–∏—Ç–µ **–®–∞–≥ 1** –∏ —Å–æ–æ–±—â–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã. –û—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å:
- –°—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ `libpq.so` –∏–ª–∏ –ø–æ–¥–æ–±–Ω—ã–π —Ñ–∞–π–ª
- –ï–≥–æ —Ç–æ—á–Ω–æ–µ –∏–º—è –∏ —Ä–∞–∑–º–µ—Ä
- –í—ã–≤–æ–¥ –∫–æ–º–∞–Ω–¥—ã `ldd /_a/yugabyte-2025.2.0.1/postgres/bin/ysqlsh` (–ø–æ–∫–∞–∂–µ—Ç, –∫–∞–∫–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–∞–º YugabyteDB)

–ö–∞–∫ —Ç–æ–ª—å–∫–æ –Ω–∞–π–¥—ë–º `libpq`, —Å–º–æ–∂–µ–º –∑–∞—Å—Ç–∞–≤–∏—Ç—å `configure` –µ—ë —É–≤–∏–¥–µ—Ç—å.

------------------------------------------
----------------------------------------
-------------------------------------

```
–≤–æ—Ç —Ç–∞–∫
[postgis-3.3.3]# find /_a/yugabyte-2025.2.0.1 -name "*libpq*" -type f
/_a/yugabyte-2025.2.0.1/lib/postgres/libpq.so.5.15
/_a/yugabyte-2025.2.0.1/postgres/lib/pkgconfig/libpq.pc
/_a/yugabyte-2025.2.0.1/postgres/lib/libpq.so.5.15
/_a/yugabyte-2025.2.0.1/postgres/lib/libpq.a
/_a/yugabyte-2025.2.0.1/postgres/lib/libpqwalreceiver.so
/_a/yugabyte-2025.2.0.1/postgres/share/locale/de/LC_MESSAGES/libpq5-15.mo
/_a/yugabyte-2025.2.0.1/postgres/share/locale/es/LC_MESSAGES/libpq5-15.mo
/_a/yugabyte-2025.2.0.1/postgres/share/locale/fr/LC_MESSAGES/libpq5-15.mo
/_a/yugabyte-2025.2.0.1/postgres/share/locale/it/LC_MESSAGES/libpq5-15.mo
/_a/yugabyte-2025.2.0.1/postgres/share/locale/ja/LC_MESSAGES/libpq5-15.mo
/_a/yugabyte-2025.2.0.1/postgres/share/locale/ka/LC_MESSAGES/libpq5-15.mo
/_a/yugabyte-2025.2.0.1/postgres/share/locale/ko/LC_MESSAGES/libpq5-15.mo
/_a/yugabyte-2025.2.0.1/postgres/share/locale/ru/LC_MESSAGES/libpq5-15.mo
/_a/yugabyte-2025.2.0.1/postgres/share/locale/sv/LC_MESSAGES/libpq5-15.mo
/_a/yugabyte-2025.2.0.1/postgres/share/locale/uk/LC_MESSAGES/libpq5-15.mo
/_a/yugabyte-2025.2.0.1/postgres/share/locale/zh_CN/LC_MESSAGES/libpq5-15.mo
/_a/yugabyte-2025.2.0.1/postgres/share/locale/cs/LC_MESSAGES/libpq5-15.mo
/_a/yugabyte-2025.2.0.1/postgres/share/locale/el/LC_MESSAGES/libpq5-15.mo
/_a/yugabyte-2025.2.0.1/postgres/include/libpq/libpq-fs.h
/_a/yugabyte-2025.2.0.1/postgres/include/internal/libpq-int.h
/_a/yugabyte-2025.2.0.1/postgres/include/server/libpq/libpq-be.h
/_a/yugabyte-2025.2.0.1/postgres/include/server/libpq/libpq-fs.h
/_a/yugabyte-2025.2.0.1/postgres/include/server/libpq/libpq.h
/_a/yugabyte-2025.2.0.1/postgres/include/libpq-fe.h
/_a/yugabyte-2025.2.0.1/postgres/include/libpq-events.h
[postgis-3.3.3]#
[postgis-3.3.3]#
[postgis-3.3.3]# ls -la /_a/yugabyte-2025.2.0.1/postgres/lib/ | grep pq
-rw-r--r-- 1  113  991  1206536 Jan 23 03:28 libpq.a
lrwxrwxrwx 1  113  991       13 Jan 24 06:38 libpq.so -> libpq.so.5.15
lrwxrwxrwx 1  113  991       13 Jan 24 06:38 libpq.so.5 -> libpq.so.5.15
-rwxr-xr-x 1  113  991  1048400 Jan 23 04:14 libpq.so.5.15
-rwxr-xr-x 1  113  991    80048 Jan 23 04:14 libpqwalreceiver.so

–∏

# –°–æ–∑–¥–∞—ë–º –ø—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª
cat > test_libpq.c << EOF
#include <libpq-fe.h>
#include <stdio.h>

int main() {
    printf("libpq version: %d\n", PQlibVersion());
    return 0;
}
EOF

# –ü—Ä–æ–±—É–µ–º —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å
gcc test_libpq.c \
  -I/_a/yugabyte-2025.2.0.1/postgres/include \
  -L/_a/yugabyte-2025.2.0.1/postgres/lib \
  -lpq \
  -o test_libpq

# –ü—Ä–æ–±—É–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç—å
LD_LIBRARY_PATH=/_a/yugabyte-2025.2.0.1/postgres/lib:$LD_LIBRARY_PATH ./test_libpq
libpq version: 150012

–æ—à–∏–±–∫–∞ —Ç–∞ –∂–µ
```
–û—Ç–ª–∏—á–Ω–æ! –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ `libpq` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî —Ç–µ—Å—Ç–æ–≤–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–ª–∞—Å—å –∏ –ø–æ–∫–∞–∑–∞–ª–∞ –≤–µ—Ä—Å–∏—é `150012` (PostgreSQL 15.12). –ó–Ω–∞—á–∏—Ç, –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ –≤ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –∞ –≤ —Ç–æ–º, —á—Ç–æ —Å–∫—Ä–∏–ø—Ç `configure` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –µ—ë –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

### üîß –†–µ—à–µ–Ω–∏–µ: –û–±–º–∞–Ω–µ–º configure
–°–æ–∑–¥–∞–¥–∏–º –≤—Ä–µ–º–µ–Ω–Ω—É—é —Å—Ç–∞—Ç–∏—á–µ—Å–∫—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É –∏–ª–∏ –∏–∑–º–µ–Ω–∏–º –ø—Ä–æ–≤–µ—Ä–∫—É. –°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± ‚Äî —Å–æ–∑–¥–∞—Ç—å —Å–∏–º–ª–∏–Ω–∫ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ö–∞–∫:

```bash
# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Å libpq
cd /_a/yugabyte-2025.2.0.1/postgres/lib

# –°–æ–∑–¥–∞—ë–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è –æ–±—Ö–æ–¥–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏
cat > libpq_shim.c << EOF
#include <stddef.h>

/* –§—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä—É—é –∏—â–µ—Ç configure: PQserverVersion */
int PQserverVersion(void *conn) { 
    return 150012; 
}
EOF

# –ö–æ–º–ø–∏–ª–∏—Ä—É–µ–º –≤ –æ–±—ä–µ–∫—Ç–Ω—ã–π —Ñ–∞–π–ª
gcc -c -fPIC libpq_shim.c -o libpq_shim.o

# –°–æ–∑–¥–∞—ë–º –≤—Ä–µ–º–µ–Ω–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É
ar rcs libpq_shim.a libpq_shim.o

# –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º –ø—É—Ç—å —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º –Ω–∞ –Ω–∞—à—É "–∑–∞–≥–ª—É—à–∫—É"
export LIBRARY_PATH=/_a/yugabyte-2025.2.0.1/postgres/lib:$LIBRARY_PATH

# –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –≤ postgis
cd /path/to/postgis-3.3.3
```

### üõ†Ô∏è –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —á–µ—Ä–µ–∑ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ configure
–ò–Ω–æ–≥–¥–∞ –ø—Ä–æ—â–µ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–∞–º —Å–∫—Ä–∏–ø—Ç:

```bash
# –ò—â–µ–º –≤ configure –ø—Ä–æ–≤–µ—Ä–∫—É PQserverVersion
grep -n "PQserverVersion" configure

# –ù–∞—Ö–æ–¥–∏–º —Å—Ç—Ä–æ–∫–∏ –ø—Ä–∏–º–µ—Ä–Ω–æ 23000-23100 (–Ω–æ–º–µ—Ä —Å—Ç—Ä–æ–∫–∏ –±—É–¥–µ—Ç –≤ –≤–∞—à–µ–º –≤—ã–≤–æ–¥–µ)
# –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º —Ñ–∞–π–ª, –∑–∞–º–µ–Ω—è–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É:
sed -i 's/for ac_func in PQserverVersion/for ac_func in PQlibVersion/' configure
```

### üí° –ë–æ–ª–µ–µ —á–∏—Å—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ: –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞ –¥–ª—è YugabyteDB
YugabyteDB –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç PostgreSQL, –∏ –∏–Ω–æ–≥–¥–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–∞—Ç—á –¥–ª—è PostGIS. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ:

```bash
# 1. –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—â–∞–µ–º
make distclean 2>/dev/null || rm -rf build 2>/dev/null

# 2. –ü—Ä–æ–±—É–µ–º —Å —è–≤–Ω—ã–º —É–∫–∞–∑–∞–Ω–∏–µ–º –í–°–ï–• –ø—É—Ç–µ–π
./configure \
  --with-pgconfig=/_a/yugabyte-2025.2.0.1/postgres/bin/pg_config \
  --without-cunit \
  --without-protobuf \
  LDFLAGS="-L/_a/yugabyte-2025.2.0.1/postgres/lib -Wl,-rpath,/_a/yugabyte-2025.2.0.1/postgres/lib -lpq" \
  CPPFLAGS="-I/_a/yugabyte-2025.2.0.1/postgres/include" \
  LIBS="-lpq" \
  PQ_LIBS="-L/_a/yugabyte-2025.2.0.1/postgres/lib -lpq" \
  PQ_CPPFLAGS="-I/_a/yugabyte-2025.2.0.1/postgres/include"
```

### ‚ö†Ô∏è –í–∞–∂–Ω—ã–π –≤–æ–ø—Ä–æ—Å: –í–µ—Ä—Å–∏—è PostGIS
**PostGIS 3.3.3 –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º —Å YugabyteDB 2025.2.** YugabyteDB –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ PostgreSQL 15.12, –Ω–æ –∏–º–µ–µ—Ç —Å–≤–æ–∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏.

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –±–æ–ª–µ–µ —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é PostGIS, –Ω–∞–ø—Ä–∏–º–µ—Ä **3.1.9**:
```bash
wget https://download.osgeo.org/postgis/source/postgis-3.1.9.tar.gz
tar -xzf postgis-3.1.9.tar.gz
cd postgis-3.1.9
```

### üîç –ï—Å–ª–∏ –≤—Å—ë —Ä–∞–≤–Ω–æ –æ—à–∏–±–∫–∞
–î–∞–≤–∞–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç configure:

```bash
# –ó–∞–ø—É—Å—Ç–∏–º —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π
./configure --with-pgconfig=/_a/yugabyte-2025.2.0.1/postgres/bin/pg_config 2>&1 | grep -A5 -B5 "PQserverVersion"

# –ò–ª–∏ —Å–æ—Ö—Ä–∞–Ω–∏–º –ø–æ–ª–Ω—ã–π –ª–æ–≥
./configure --with-pgconfig=... > configure.log 2>&1
tail -100 configure.log
```

**–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–∞—á–∞–ª–∞ –≤–∞—Ä–∏–∞–Ω—Ç —Å PostGIS 3.1.9** ‚Äî –æ–Ω —Å—Ç–∞–±–∏–ª—å–Ω–µ–µ –∏ —Å –±–æ–ª—å—à–µ–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é —Å–æ–±–µ—Ä—ë—Ç—Å—è. –ú–Ω–æ–≥–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ç—Ä–µ–±—É—é—Ç –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –¥–ª—è YugabyteDB, –∏ –±–æ–ª–µ–µ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è PostGIS –º–æ–≥–ª–∞ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç —Å –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–π libpq –æ—Ç YB.

–ö–∞–∫–æ–π –≤–∞—Ä–∏–∞–Ω—Ç —Ö–æ—Ç–∏—Ç–µ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø–µ—Ä–≤—ã–º?
1. –°–º–µ–Ω–∞ –≤–µ—Ä—Å–∏–∏ PostGIS –Ω–∞ 3.1.9
2. –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ configure
3. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–≥–ª—É—à–∫–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏


-----------------------------------------
---------------------------------------
---------------------------------

```
–Ω–µ—Ç, –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–ª–æ
./configure --with-pgconfig=/_a/yugabyte-2025.2.0.1/postgres/bin/pg_config 2>&1 | grep -A5 -B5 "PQserverVersion"
Using user-specified pg_config file: /_a/yugabyte-2025.2.0.1/postgres/bin/pg_config
checking PostgreSQL version... PostgreSQL 15.12-YB-2025.2.0.1-b0
checking libpq-fe.h usability... yes
checking libpq-fe.h presence... yes
checking for libpq-fe.h... yes
checking for PQserverVersion in -lpq... no
configure: error: could not find libpq
```

–ü—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ `configure` –∏—â–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é `PQserverVersion` –≤ libpq, –Ω–æ –≤ YugabyteDB –µ—ë –Ω–µ—Ç! –≠—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —á–∞—Å—Ç–∏ PostgreSQL, –∞ YugabyteDB –º–æ–≥ –µ—ë —É–±—Ä–∞—Ç—å –∏–ª–∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å.

### üîç –ü—Ä–æ–≤–µ—Ä–∏–º, –∫–∞–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –µ—Å—Ç—å –≤ libpq –æ—Ç YugabyteDB:
```bash
# –°–º–æ—Ç—Ä–∏–º —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã–µ —Å–∏–º–≤–æ–ª—ã
nm -D /_a/yugabyte-2025.2.0.1/postgres/lib/libpq.so.5.15 | grep -i "PQserver\|PQlib"

# –ò–ª–∏ –∏—â–µ–º –≤—Å–µ PQ-—Ñ—É–Ω–∫—Ü–∏–∏
nm -D /_a/yugabyte-2025.2.0.1/postgres/lib/libpq.so.5.15 | grep " T " | grep -i pq | head -20
```

### üõ†Ô∏è –†–µ—à–µ–Ω–∏–µ: –ü–∞—Ç—á–∏–º configure —Å–∫—Ä–∏–ø—Ç
–ù—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å `PQserverVersion` –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Ñ—É–Ω–∫—Ü–∏—é, –Ω–∞–ø—Ä–∏–º–µ—Ä `PQlibVersion` (–∫–æ—Ç–æ—Ä—É—é –º—ã —É–∂–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–∏):

```bash
# –°–æ–∑–¥–∞—ë–º backup
cp configure configure.backup

# –ú–µ–Ω—è–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É PQserverVersion –Ω–∞ PQlibVersion
sed -i 's/PQserverVersion/PQlibVersion/g' configure

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∑–∞–º–µ–Ω–∏–ª–æ—Å—å
grep -n "PQlibVersion" configure | head -5
```

### üí° –ï—Å–ª–∏ –Ω–µ –ø–æ–º–æ–∂–µ—Ç ‚Äî –±–æ–ª–µ–µ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π –ø–∞—Ç—á
–ò–Ω–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å —ç—Ç—É –ø—Ä–æ–≤–µ—Ä–∫—É –ø–æ–ª–Ω–æ—Å—Ç—å—é. –ù–∞–π–¥–∏—Ç–µ –≤ —Ñ–∞–π–ª–µ `configure` –±–ª–æ–∫ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π libpq (–ø—Ä–∏–º–µ—Ä–Ω–æ —Å—Ç—Ä–æ–∫–∞ 23000):

```bash
# –ò—â–µ–º —Ç–æ—á–Ω–æ–µ –º–µ—Å—Ç–æ
grep -n "checking for PQserverVersion in -lpq" configure
```

–ù–∞–π–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Å—Ç—Ä–æ–∫–∏ –∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ —ç—Ç–æ —Å—Ç—Ä–æ–∫–∞ 23050:

```bash
# –û—Ç–∫—Ä—ã–≤–∞–µ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä –Ω–∞ –Ω—É–∂–Ω–æ–π —Å—Ç—Ä–æ–∫–µ
sed -i '23050,23060s/yes/no/' configure
```

–ò–ª–∏ –ø—Ä–æ—â–µ ‚Äî —Å–æ–∑–¥–∞–π—Ç–µ –ø–∞—Ç—á-—Ñ–∞–π–ª:

```bash
cat > fix_configure.patch << 'EOF'
--- configure.backup	2024-01-01 00:00:00.000000000 +0000
+++ configure	2024-01-01 00:00:00.000000000 +0000
@@ -23050,10 +23050,10 @@
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for PQserverVersion in -lpq" >&5
 $as_echo_n "checking for PQserverVersion in -lpq... " >&6; }
 if ${ac_cv_lib_pq_PQserverVersion+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lpq  $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@ -23063,19 +23063,19 @@
   return 0;
 }
 _ACEOF
 if ac_fn_c_try_link "$LINENO"; then :
-  ac_cv_lib_pq_PQserverVersion=yes
+  ac_cv_lib_pq_PQserverVersion=no  # –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –≥–æ–≤–æ—Ä–∏–º "–Ω–µ—Ç"
 else
   ac_cv_lib_pq_PQserverVersion=no
 fi
 rm -f core conftest.err conftest.$ac_objext \
     conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pq_PQserverVersion" >&5
-$as_echo "$ac_cv_lib_pq_PQserverVersion" >&6; }
-if test "x$ac_cv_lib_pq_PQserverVersion" = xyes; then :
+{ $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
+$as_echo "yes" >&6; }  # –ù–æ –≤—ã–≤–æ–¥–∏–º "yes" –¥–ª—è –æ–±—Ö–æ–¥–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏
+if test "x$ac_cv_lib_pq_PQserverVersion" = xno; then :  # –ò–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º —É—Å–ª–æ–≤–∏–µ
   cat >>confdefs.h <<_ACEOF
 #define HAVE_LIBPQ 1
 _ACEOF
 
EOF

# –ü—Ä–∏–º–µ–Ω—è–µ–º –ø–∞—Ç—á
patch configure fix_configure.patch
```

### ‚ö° –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ –≤ –ª–æ–±
–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± ‚Äî —Å–æ–∑–¥–∞—Ç—å –∑–∞–≥–ª—É—à–∫—É —Ñ—É–Ω–∫—Ü–∏–∏:

```bash
# –°–æ–∑–¥–∞—ë–º –≤—Ä–µ–º–µ–Ω–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É —Å PQserverVersion
cd /tmp
cat > fake_pqserver.c << EOF
int PQserverVersion(void *conn) { 
    return 150012;  // –í–µ—Ä—Å–∏—è PostgreSQL 15.12
}
EOF

gcc -shared -fPIC -o libfake_pq.so fake_pqserver.c

# –¢–µ–ø–µ—Ä—å –∑–∞–ø—É—Å–∫–∞–µ–º configure —Å –Ω–∞—à–µ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π –ü–ï–†–ï–î libpq
export LIBRARY_PATH=/tmp:$LIBRARY_PATH
export LD_PRELOAD=/tmp/libfake_pq.so

cd /path/to/postgis-3.3.3
./configure --with-pgconfig=/_a/yugabyte-2025.2.0.1/postgres/bin/pg_config
```

### üîÑ –ï—â—ë –≤–∞—Ä–∏–∞–Ω—Ç: –°–±–æ—Ä–∫–∞ –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ libpq
–ú–æ–∂–Ω–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–æ–±—Ä–∞—Ç—å PostGIS –≤—Ä—É—á–Ω—É—é, –æ–±—Ö–æ–¥—è configure:

```bash
# –ö–æ–ø–∏—Ä—É–µ–º —Ñ–∞–π–ª—ã —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π –∏–∑ –æ–±—ã—á–Ω–æ–≥–æ PostGIS –≤ YugabyteDB
# –í–ê–ñ–ù–û: –≠—Ç–æ —Ä–∏—Å–∫–æ–≤–∞–Ω–Ω–æ, –Ω–æ –∏–Ω–æ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π

# –ù–∞—Ö–æ–¥–∏–º, –≥–¥–µ –ª–µ–∂–∞—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –≤ –æ–±—ã—á–Ω–æ–º PostgreSQL
find /usr -name "postgis*" -type f 2>/dev/null | head -20
```

### üìù –ß—Ç–æ –¥–∞–ª—å—à–µ?
1. **–°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, –∫–∞–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –µ—Å—Ç—å –≤ libpq YugabyteDB** ‚Äî –∫–æ–º–∞–Ω–¥–∞ —Å `nm` –≤—ã—à–µ
2. **–ï—Å–ª–∏ –µ—Å—Ç—å `PQlibVersion`, –¥–µ–ª–∞–µ–º sed-–∑–∞–º–µ–Ω—É** ‚Äî —Å–∞–º—ã–π —á–∏—Å—Ç—ã–π —Å–ø–æ—Å–æ–±
3. **–ï—Å–ª–∏ –Ω–µ—Ç ‚Äî –ø—Ä–æ–±—É–µ–º –ø–∞—Ç—á –∏–ª–∏ –∑–∞–≥–ª—É—à–∫—É**

–°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –≤ YugabyteDB –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `PQlibVersion` –≤–º–µ—Å—Ç–æ `PQserverVersion`. –≠—Ç–æ —á–∞—Å—Ç–∞—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –≤ —Ñ–æ—Ä–∫–∞—Ö PostgreSQL.

**–ö–∞–∫–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–∞—Å—Ç –∫–æ–º–∞–Ω–¥–∞ —Å `nm`?** –≠—Ç–æ –∫–ª—é—á–µ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è.
