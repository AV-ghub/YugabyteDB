### üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å PostGIS
–û—à–∏–±–∫–∞ –≥–æ–≤–æ—Ä–∏—Ç, —á—Ç–æ –≤ **–æ–±—Ä–∞–∑–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞** YugabyteDB —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ PostGIS –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. –ù—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –µ–≥–æ **–≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞**.

**–®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ PostGIS –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä TServer**

–ü–æ—Å–∫–æ–ª—å–∫—É —É –≤–∞—Å 3 TServer –∏ –≤—Å–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω –æ–±—Ä–∞–∑, –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤ –æ–¥–∏–Ω –∏–∑ –Ω–∏—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ `yb-tserver-a`):

```bash
# 1. –í–æ–π–¥–∏—Ç–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä TServer
docker exec -it yugabyte_yb-tserver-a_1 bash

# 2. –í–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ PostGIS
# YugabyteDB –∏—Å–ø–æ–ª—å–∑—É–µ—Ç PostgreSQL 15, –ø–æ—ç—Ç–æ–º—É:
apt-get update && apt-get install -y postgresql-15-postgis-3

# 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É
ls /usr/share/postgresql/15/extension/postgis*

# 4. –í—ã–π–¥–∏—Ç–µ –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
exit
```

**–®–∞–≥ 2: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ TServer –∏ —Å–æ–∑–¥–∞–π—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ**

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤—Å—Ç—É–ø–∏–ª–∏ –≤ —Å–∏–ª—É
docker-compose restart yb-tserver-a

# –ü–æ–¥–æ–∂–¥–∏—Ç–µ 30 —Å–µ–∫—É–Ω–¥
sleep 30

# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞
psql -h localhost -p 5433 -U yugabyte -d geo_test -c "CREATE EXTENSION postgis;"
```

**–®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å**

```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–π
SELECT version();
SELECT postgis_version();
SELECT PostGIS_Full_Version();

-- –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç –≥–µ–æ-—Ñ—É–Ω–∫—Ü–∏–π
SELECT ST_MakePoint(37.6, 55.7) as point,
       ST_GeomFromText('POLYGON((0 0, 1 0, 1 1, 0 1, 0 0))') as polygon;
```

### ‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –≤–µ—Ä—Å–∏–∏ psql
**–≠—Ç–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã, –Ω–æ –≤–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å:**

| –í–µ—Ä—Å–∏—è | –ß—Ç–æ —ç—Ç–æ | –ü–æ—á–µ–º—É —Ç–∞–∫ | –û–ø–∞—Å–Ω–æ? |
|--------|---------|------------|---------|
| **psql 9.2** | –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —É—Ç–∏–ª–∏—Ç–∞ –Ω–∞ –≤–∞—à–µ–º **CentOS 7** | –í CentOS 7 –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è | **–ù–µ—Ç**, –Ω–æ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –º–æ–≥—É—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å |
| **PostgreSQL 15.12** | –°–µ—Ä–≤–µ—Ä–Ω–∞—è –≤–µ—Ä—Å–∏—è –≤ **YugabyteDB** | YugabyteDB –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–π PostgreSQL | **–ù–æ—Ä–º–∞–ª—å–Ω–æ** ‚Äî —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è |

**–†–µ—à–µ–Ω–∏–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π psql:

```bash
# –î–ª—è CentOS 7 —á–µ—Ä–µ–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π PostgreSQL
sudo yum install -y https://download.postgresql.org/pub/repos/yum/reporpms/EL-7-x86_64/pgdg-redhat-repo-latest.noarch.rpm
sudo yum install -y postgresql15

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ
psql --version
# –¢–µ–ø–µ—Ä—å –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å: psql (PostgreSQL) 15.x
```

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:** –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `ysqlsh` –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:

```bash
# –í–º–µ—Å—Ç–æ psql –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ ysqlsh –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker exec -it yugabyte_yb-tserver-a_1 ysqlsh -U yugabyte -d geo_test
```

### üìã –ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ PostGIS –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∞

–ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ `apt-get install` –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (–æ–±—Ä–∞–∑ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞ –æ—Å–Ω–æ–≤–µ Alpine Linux), –ø–æ–ø—Ä–æ–±—É–π—Ç–µ:

```bash
# –í–æ–π–¥–∏—Ç–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –û–°
docker exec -it yugabyte_yb-tserver-a_1 cat /etc/os-release

# –î–ª—è Alpine Linux (–µ—Å–ª–∏ —Ç–∞–∫):
apk add --no-cache postgis
```

### üéØ –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π –Ω–∞ —Å–µ–≥–æ–¥–Ω—è

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ PostGIS** –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (–∫–æ–º–∞–Ω–¥—ã –≤—ã—à–µ)
2. **–û–±–Ω–æ–≤–∏—Ç–µ psql** –Ω–∞ —Ö–æ—Å—Ç–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
3. **–í—ã–ø–æ–ª–Ω–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã** –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è

**–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É PostGIS –∏ –ø–æ–∫–∞–∂–∏—Ç–µ:**
1. –†–µ–∑—É–ª—å—Ç–∞—Ç –∫–æ–º–∞–Ω–¥—ã `apt-get install` (–∏–ª–∏ `apk add`)
2. –í—ã–≤–æ–¥ `SELECT postgis_version();` –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
3. –†–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–ø—Ä–æ—Å–∞ —Å `ST_MakePoint` –∏ `ST_GeomFromText`
