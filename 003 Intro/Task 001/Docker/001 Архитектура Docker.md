## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Docker: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, —Å–µ—Ç–∏ –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å —Ö–æ—Å—Ç–æ–º

### **1. –ë–∞–∑–æ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã (–∫—Ä–∞—Ç–∫–æ)**

Docker —Å–æ–∑–¥–∞–µ—Ç –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ä–µ–¥—ã (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã), –∫–æ—Ç–æ—Ä—ã–µ:
- **–ò–º–µ—é—Ç —Å–≤–æ—é —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É** (–Ω–∞—Å–ª–µ–¥—É—é—Ç –æ—Ç –æ–±—Ä–∞–∑–∞)
- **–†–∞–±–æ—Ç–∞—é—Ç –≤ —Å–≤–æ–∏—Ö network namespace** (–∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–µ—Ç—å)
- **–ú–æ–≥—É—Ç –æ–±—â–∞—Ç—å—Å—è —Å —Ö–æ—Å—Ç–æ–º –∏ –º–µ–∂–¥—É —Å–æ–±–æ–π** —á–µ—Ä–µ–∑ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏

### **2. –¢–∏–ø—ã —Å–µ—Ç–µ–π –≤ Docker**

Docker —Å–æ–∑–¥–∞–µ—Ç 3 –æ—Å–Ω–æ–≤–Ω—ã–µ —Å–µ—Ç–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:

| –¢–∏–ø —Å–µ—Ç–∏ | –û–ø–∏—Å–∞–Ω–∏–µ | –ö–∞–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤–∏–¥—è—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞ | –ö–∞–∫ —Ö–æ—Å—Ç –≤–∏–¥–∏—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã |
|----------|----------|--------------------------------|----------------------------|
| **bridge (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)** | –í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è —Å–µ—Ç—å –≤–Ω—É—Ç—Ä–∏ —Ö–æ—Å—Ç–∞ | –ü–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º IP (172.17.0.x) | –ù—É–∂–Ω–∞ –ø—Ä–æ–±—Ä–æ—Å–∫–∞ –ø–æ—Ä—Ç–æ–≤ (`-p`) |
| **host** | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–µ—Ç–µ–≤–æ–π —Å—Ç–µ–∫ —Ö–æ—Å—Ç–∞ | –ö–∞–∫ –æ–±—ã—á–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã —Ö–æ—Å—Ç–∞ | –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –ø–æ—Ä—Ç–∞–º |
| **none** | –ë–µ–∑ —Å–µ—Ç–∏ | –ù–µ –≤–∏–¥—è—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞ | –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã |

### **3. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞: –∫–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç**

#### **–®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ—Ç–∏ Docker**

```bash
# –°–º–æ—Ç—Ä–∏–º –≤—Å–µ —Å–µ—Ç–∏
docker network ls

# –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ bridge —Å–µ—Ç–∏
docker network inspect bridge

# –°–æ–∑–¥–∞–µ–º —Å–≤–æ—é —Å–µ—Ç—å
docker network create my-network
docker network inspect my-network
```

#### **–®–∞–≥ 2: –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã**

```bash
# –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä 1: –í —Å–µ—Ç–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (bridge)
docker run -d --name test1 --hostname test1 alpine sleep 3600

# –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä 2: –í —Ç–æ–π –∂–µ —Å–µ—Ç–∏ —Å –ø—Ä–æ–±—Ä–æ—Å–∫–æ–π –ø–æ—Ä—Ç–∞
docker run -d --name test2 --hostname test2 -p 8080:80 alpine sleep 3600

# –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä 3: –í —Å–æ–∑–¥–∞–Ω–Ω–æ–π –Ω–∞–º–∏ —Å–µ—Ç–∏
docker run -d --name test3 --hostname test3 --network my-network alpine sleep 3600
```

#### **–®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ—Ç–µ–≤—É—é –∏–∑–æ–ª—è—Ü–∏—é**

```bash
# –ó–∞—Ö–æ–¥–∏–º –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä test1
docker exec -it test1 sh

# –í–ù–£–¢–†–ò –ö–û–ù–¢–ï–ô–ù–ï–†–ê:
# 1. –°–º–æ—Ç—Ä–∏–º —Å–≤–æ–π IP
hostname -I  # –ù–∞–ø—Ä–∏–º–µ—Ä: 172.17.0.2

# 2. –ü–∏–Ω–≥—É–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä test2 (–æ–Ω –≤ —Ç–æ–π –∂–µ —Å–µ—Ç–∏)
ping test2  # –†–∞–±–æ—Ç–∞–µ—Ç! Docker DNS —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –∏–º–µ–Ω–∞

# 3. –ü–∏–Ω–≥—É–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä test3 (–≤ –¥—Ä—É–≥–æ–π —Å–µ—Ç–∏)
ping test3  # –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç! –†–∞–∑–Ω—ã–µ —Å–µ—Ç–∏

# 4. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–≤—è–∑—å —Å —Ö–æ—Å—Ç–æ–º
ping host.docker.internal  # –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –∏–º—è –¥–ª—è —Ö–æ—Å—Ç–∞
# –∏–ª–∏ —Å–º–æ—Ç—Ä–∏–º —à–ª—é–∑ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
ip route show default  # –û–±—ã—á–Ω–æ 172.17.0.1

# 5. –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç
ping 8.8.8.8  # –†–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ NAT

# –í—ã—Ö–æ–¥–∏–º –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
exit
```

#### **–®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å —Ö–æ—Å—Ç–∞**

```bash
# 1. –•–æ—Å—Ç –≤–∏–¥–∏—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä test2 —á–µ—Ä–µ–∑ –ø—Ä–æ–±—Ä–æ—à–µ–Ω–Ω—ã–π –ø–æ—Ä—Ç
curl http://localhost:8080  # –ü–æ—Ä—Ç 8080 —Ö–æ—Å—Ç–∞ –ø—Ä–æ–±—Ä–æ—à–µ–Ω –≤ –ø–æ—Ä—Ç 80 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

# 2. –ù–æ –Ω–µ –≤–∏–¥–∏—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä test1 –Ω–∞–ø—Ä—è–º—É—é
# –ü—Ä–æ–≤–µ—Ä–∏–º, —Å–ª—É—à–∞–µ—Ç –ª–∏ —á—Ç–æ-—Ç–æ –Ω–∞ –ø–æ—Ä—Ç–∞—Ö
docker exec test1 netstat -tln  # –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –º–æ–∂–µ—Ç —Å–ª—É—à–∞—Ç—å –Ω–∞ —Å–≤–æ–∏—Ö –ø–æ—Ä—Ç–∞—Ö
# –ù–æ —Ö–æ—Å—Ç –∫ –Ω–∏–º –Ω–µ –∏–º–µ–µ—Ç –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –±–µ–∑ –ø—Ä–æ–±—Ä–æ—Å–∫–∏ –ø–æ—Ä—Ç–æ–≤

# 3. –°–º–æ—Ç—Ä–∏–º IP –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ —Å —Ö–æ—Å—Ç–∞
docker inspect test1 --format='{{.NetworkSettings.IPAddress}}'
docker inspect test2 --format='{{.NetworkSettings.IPAddress}}'
docker inspect test3 --format='{{.NetworkSettings.Networks.my-network.IPAddress}}'

# 4. –ü–∏–Ω–≥—É–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Å —Ö–æ—Å—Ç–∞ (–µ—Å–ª–∏ firewall –ø–æ–∑–≤–æ–ª—è–µ—Ç)
ping 172.17.0.2  # test1
ping 172.17.0.3  # test2
```

### **4. Docker Compose –∏ —Å–µ—Ç–∏**

–í–∞—à `docker-compose.yml` –¥–ª—è YugabyteDB —Å–æ–∑–¥–∞–µ—Ç —Å–≤–æ—é —Å–µ—Ç—å:

```yaml
# –ü—Ä–∏–º–µ—Ä docker-compose.yml
version: '3.8'
services:
  yb-master:
    image: yugabytedb/yugabyte:latest
    container_name: yb-master
    # –°–æ–∑–¥–∞–µ—Ç —Å–µ—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —ç—Ç–æ–≥–æ compose-–ø—Ä–æ–µ–∫—Ç–∞
    networks:
      - yugabyte-network

  yb-tserver:
    image: yugabytedb/yugabyte:latest
    container_name: yb-tserver
    networks:
      - yugabyte-network

networks:
  yugabyte-network:
    driver: bridge
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
# –ü–æ—Å–ª–µ docker-compose up
docker network ls  # –£–≤–∏–¥–∏—Ç–µ —Å–µ—Ç—å –≤–∏–¥–∞ yugabyte_yugabyte-network

# –°–º–æ—Ç—Ä–∏–º –¥–µ—Ç–∞–ª–∏
docker network inspect yugabyte_yugabyte-network

# –í—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —ç—Ç–æ–≥–æ compose-–ø—Ä–æ–µ–∫—Ç–∞ –≤ –æ–¥–Ω–æ–π —Å–µ—Ç–∏
docker exec yb-tserver ping yb-master  # –†–∞–±–æ—Ç–∞–µ—Ç!
```

### **5. –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏**

```bash
# 1. –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –∏ –∏—Ö —Å–µ—Ç–µ–π
docker ps --format "table {{.Names}}\t{{.Ports}}\t{{.Status}}"

# 2. –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker inspect yugabyte_yb-tserver1_1 | jq '.[0].NetworkSettings'

# 3. –°–º–æ—Ç—Ä–∏–º –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ—Ä—Ç—ã –Ω–∞ —Ö–æ—Å—Ç–µ
ss -tlnp | grep docker

# 4. –¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –º–∞—Ä—à—Ä—É—Ç–∞ –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker exec yugabyte_yb-tserver1_1 traceroute 8.8.8.8

# 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ DNS –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker exec yugabyte_yb-tserver1_1 cat /etc/resolv.conf
```

### **6. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä: –ö–∞–∫ YugabyteDB —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ Docker**

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ—Ä—Ç—ã Yugabyte
docker exec yugabyte_yb-tserver1_1 netstat -tlnp

# –î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
# 5433 - YSQL (PostgreSQL –ø—Ä–æ—Ç–æ–∫–æ–ª)
# 9042 - YCQL (Cassandra –ø—Ä–æ—Ç–æ–∫–æ–ª) 
# 7000 - Web UI

# 2. –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∫–∞–∫ —Ö–æ—Å—Ç –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ –Ω–∏–º
# YSQL –ø—Ä–æ–±—Ä–æ—à–µ–Ω –Ω–∞ —Ö–æ—Å—Ç (–≤ –≤–∞—à–µ–º —Å–ª—É—á–∞–µ)
psql -h localhost -p 5433 -U yugabyte

# 3. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–≤—è–∑—å –º–µ–∂–¥—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞
docker exec yugabyte_yb-tserver1_1 ping yugabyte_yb-master1_1

# 4. –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–Ω–µ—à–Ω–∏–π –¥–æ—Å—Ç—É–ø
# –° —Ö–æ—Å—Ç–∞:
curl http://localhost:7000  # Web UI
# –ò–∑–≤–Ω–µ, –µ—Å–ª–∏ –ø—Ä–æ–±—Ä–æ—à–µ–Ω—ã –ø–æ—Ä—Ç—ã:
# psql -h <IP_—Ö–æ—Å—Ç–∞> -p 5433 -U yugabyte
```

### **7. –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã**

```
–•–û–°–¢ –ú–ê–®–ò–ù–ê (–Ω–∞–ø—Ä–∏–º–µ—Ä, 192.168.1.100)
‚îú‚îÄ‚îÄ –î–æ–∫–µ—Ä –¥–µ–º–æ–Ω
‚îú‚îÄ‚îÄ –í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è —Å–µ—Ç—å docker0 (172.17.0.1)
‚îÇ   ‚îú‚îÄ‚îÄ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä yb-master (172.17.0.2)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ –ü–æ—Ä—Ç 7000:7000 (–ø—Ä–æ–±—Ä–æ—à–µ–Ω –Ω–∞ —Ö–æ—Å—Ç)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ –ü–æ—Ä—Ç 7100 (—Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ —Å–µ—Ç–∏)
‚îÇ   ‚îî‚îÄ‚îÄ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä yb-tserver (172.17.0.3)
‚îÇ       ‚îú‚îÄ‚îÄ –ü–æ—Ä—Ç 9042:9042 (–ø—Ä–æ–±—Ä–æ—à–µ–Ω –Ω–∞ —Ö–æ—Å—Ç)
‚îÇ       ‚îî‚îÄ‚îÄ –ü–æ—Ä—Ç 5433:5433 (–ø—Ä–æ–±—Ä–æ—à–µ–Ω –Ω–∞ —Ö–æ—Å—Ç)
‚îî‚îÄ‚îÄ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ —Ö–æ—Å—Ç–µ
    ‚îú‚îÄ‚îÄ psql ‚Üí localhost:5433 ‚Üí yb-tserver:5433
    ‚îî‚îÄ‚îÄ ycqlsh ‚Üí localhost:9042 ‚Üí yb-tserver:9042
```

### **8. –ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å YugabyteDB**

1. **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤ –æ–¥–Ω–æ–º `docker-compose` –ø—Ä–æ–µ–∫—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—é—Ç –æ–±—â—É—é —Å–µ—Ç—å**
2. **–ü–æ—Ä—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —è–≤–Ω–æ –ø—Ä–æ–±—Ä–æ—à–µ–Ω—ã (`ports:` –≤ compose) –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ —Å —Ö–æ—Å—Ç–∞**
3. **Docker DNS –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º –ø–æ –∏–º–µ–Ω–∏ —Å–µ—Ä–≤–∏—Å–∞**
4. **–î–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –∂–∏–≤—É—Ç –≤ volumes, —Å–µ—Ç–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ - –≤ network namespace**

### **üéØ –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª—è –≤–∞—à–µ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞ YugabyteDB:**

```bash
# 1. –ö–∞–∫–∏–µ —Å–µ—Ç–∏ –µ—Å—Ç—å?
docker network ls | grep yugabyte

# 2. –ö–∞–∫ —Å–≤—è–∑–∞–Ω—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã?
docker network inspect yugabyte_default

# 3. –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–æ—Ä—Ç–æ–≤
# –° —Ö–æ—Å—Ç–∞:
telnet localhost 5433  # YSQL
telnet localhost 9042  # YCQL

# –ò–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:
docker exec yugabyte_yb-tserver1_1 nc -zv yugabyte_yb-master1_1 7100

# 4. –ü—Ä–æ–≤–µ—Ä—è–µ–º –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é
docker exec yugabyte_yb-tserver1_1 ip route
docker exec yugabyte_yb-tserver1_1 traceroute -n 8.8.8.8
```
