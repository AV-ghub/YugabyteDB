–û—Ç–ª–∏—á–Ω–æ, –≤–∏–¥–Ω–∞ –≤—Å—è –∫–∞—Ä—Ç–∏–Ω–∞: **–ø–∞–∫–µ—Ç `postgis33_15` –¥–æ—Å—Ç—É–ø–µ–Ω, –Ω–æ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏–∑-–∑–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ –º–æ–¥—É–ª–µ–π —Å `postgresql15-contrib`**. –ö–∞–∫ –º—ã –≤–∏–¥–∏–º, —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å –≤—ã–≤–æ–¥–æ–º `Nothing to do`, –ø–æ—Ç–æ–º—É —á—Ç–æ DNF –ø—Ä–æ—Å—Ç–æ –Ω–µ —Å–º–æ–≥ —Ä–∞–∑—Ä–µ—à–∏—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç –∏ –Ω–∏—á–µ–≥–æ –Ω–µ —Å–¥–µ–ª–∞–ª.

–≠—Ç–æ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞, –∫–æ–≥–¥–∞ —Å–∏—Å—Ç–µ–º–∞ AlmaLinux –ø—ã—Ç–∞–µ—Ç—Å—è –∑–∞—â–∏—Ç–∏—Ç—å —Å–≤–æ–π –º–æ–¥—É–ª—å `postgresql:15`. –ù–∞–º –Ω—É–∂–Ω–æ **–ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–∑—Ä–µ—à–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É –ø–∞–∫–µ—Ç–æ–≤ –∏–∑ –≤–Ω–µ—à–Ω–µ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è PGDG**, –æ—Ç–∫–ª—é—á–∏–≤ –º–æ–¥—É–ª—å–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã.

### üéØ –†–µ—à–µ–Ω–∏–µ: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ–º –º–æ–¥—É–ª—å–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ —Å–ª–µ–¥—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É, –∫–æ—Ç–æ—Ä–∞—è —è–≤–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–æ –º–æ–¥—É–ª—é –¥–ª—è —ç—Ç–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏:

```bash
dnf install -y postgis33_15 --setopt=module_platform_id=platform:el8 --disable-module-filtering
```

**–§–ª–∞–≥ `--disable-module-filtering`** ‚Äî —ç—Ç–æ –∫–ª—é—á, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–∫–∞–∑—ã–≤–∞–µ—Ç DNF –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã –º–æ–¥—É–ª–µ–π –∏ –ø—Ä–æ—Å—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–ø—Ä–æ—à–µ–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç—ã.

### üìä –ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è

–ï—Å–ª–∏ –∏ —ç—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç, –≤–æ—Ç **–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏**, —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–Ω—ã–µ –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é —Å–ª–æ–∂–Ω–æ—Å—Ç–∏:

| –ü–æ–¥—Ö–æ–¥ | –ö–æ–º–∞–Ω–¥–∞ | –ü–ª—é—Å—ã / –ú–∏–Ω—É—Å—ã |
| :--- | :--- | :--- |
| **1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** | `dnf install -y postgis33_15 --exclude=postgresql15-contrib` | –ë—ã—Å—Ç—Ä–æ, –Ω–æ –º–æ–∂–µ—Ç –Ω–µ —Ö–≤–∞—Ç–∏—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π `contrib`. |
| **2. –ü–æ–ª–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –º–æ–¥—É–ª—è (–∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ)** | `dnf module disable -y postgresql:15` <br> `dnf install -y postgis33_15` | –†–µ—à–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç, –Ω–æ –º–æ–∂–µ—Ç –ø–æ–≤–ª–∏—è—Ç—å –Ω–∞ –¥—Ä—É–≥–∏–µ –ø–∞–∫–µ—Ç—ã –≤ —Å–∏—Å—Ç–µ–º–µ. |
| **3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–∑ –º–æ–¥—É–ª—è (–µ—Å–ª–∏ –µ—Å—Ç—å)** | `dnf module install -y postgresql:15/postgis` | –ß–∏—Å—Ç—ã–π –ø—É—Ç—å, –µ—Å–ª–∏ PostGIS –µ—Å—Ç—å –≤ –º–æ–¥—É–ª–µ AlmaLinux (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–º–∞–Ω–¥–æ–π `dnf module info postgresql:15`). |

**–†–µ–∫–æ–º–µ–Ω–¥—É—é –Ω–∞—á–∞—Ç—å —Å –ø–µ—Ä–≤–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞** (—É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º `contrib`). –î–ª—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å—Ç–µ–Ω–¥–∞ —ç—Ç–æ–≥–æ –æ–±—ã—á–Ω–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É:

```bash
# –ü—Ä–æ–±—É–µ–º —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–µ–∑ –ø—Ä–æ–±–ª–µ–º–Ω–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
dnf install -y postgis33_15 --exclude=postgresql15-contrib

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —É—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è –ª–∏ –ø–∞–∫–µ—Ç
rpm -qa | grep postgis
```

### üóÇÔ∏è –î–∞–ª—å–Ω–µ–π—à–∏–µ —à–∞–≥–∏ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏

–ö–∞–∫ —Ç–æ–ª—å–∫–æ –ø–∞–∫–µ—Ç –ø–æ—è–≤–∏—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ (`rpm -qa`), –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –ø—Ä–∏—Å—Ç—É–ø–∞–π—Ç–µ –∫ **–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—é —Ñ–∞–π–ª–æ–≤**:

```bash
# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è PostGIS
cp -r /usr/pgsql-15/share/extension/*postgis* /home/yugabyte/share/postgresql/extension/

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–ø–∫–∏ contrib (–æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –≤–µ—Ä—Å–∏—é PostGIS ‚Äî —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ 3.3)
cp -r /usr/pgsql-15/share/contrib/postgis-3.3 /home/yugabyte/share/postgresql/contrib/

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
cp /usr/pgsql-15/lib/postgis-3.3.so /home/yugabyte/lib/postgresql/

# –ü—Ä–æ–≤–µ—Ä–∫–∞
ls -la /home/yugabyte/share/postgresql/extension/postgis*
```

**–°—Ä–∞–∑—É –ø–æ—Å–ª–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è** –≤—ã–π–¥–∏—Ç–µ –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (`exit`), –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ TServer –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É:

```bash
# –í—ã–π–¥–∏—Ç–µ –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–∞ —Ö–æ—Å—Ç–æ–≤–æ–π –º–∞—à–∏–Ω–µ
exit

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ –ø–æ–¥–æ–∂–¥–∏—Ç–µ
docker-compose restart yb-tserver-a
sleep 30

# –§–∏–Ω–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç
psql -h localhost -p 5433 -U yugabyte -d geo_test -c "CREATE EXTENSION postgis; SELECT postgis_version();"
```

### ‚è≥ –£—á–∏—Ç—ã–≤–∞—è –≤–∞—à–∏ –∂—ë—Å—Ç–∫–∏–µ —Å—Ä–æ–∫–∏

–ï—Å–ª–∏ –ø–æ—Å–ª–µ –≤—Å–µ—Ö –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–π —Å DNF —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ —É–¥–∞—ë—Ç—Å—è, —Å—Ç–æ–∏—Ç —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å **–±–æ–ª–µ–µ –±—ã—Å—Ç—Ä—ã–π –ø—É—Ç—å** –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è PostGIS: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç–æ—Ä–æ–Ω–Ω–µ–≥–æ –≥–æ—Ç–æ–≤–æ–≥–æ –æ–±—Ä–∞–∑–∞ (–∫–∞–∫ –æ–±—Å—É–∂–¥–∞–ª–æ—Å—å —Ä–∞–Ω–µ–µ) –∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ PostGIS –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π, —á–∏—Å—Ç—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å PostgreSQL –¥–ª—è –æ—Ç—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤, –Ω–µ –¥–æ–∂–∏–¥–∞—è—Å—å —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –∫–ª–∞—Å—Ç–µ—Ä–µ.

**–ù–∞—á–Ω–∏—Ç–µ —Å –∫–æ–º–∞–Ω–¥—ã `dnf install -y postgis33_15 --exclude=postgresql15-contrib` –∏ —Å–æ–æ–±—â–∏—Ç–µ –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ.** –ï—Å–ª–∏ –ø–∞–∫–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è, –º—ã —Å—Ä–∞–∑—É –ø–µ—Ä–µ–π–¥—ë–º –∫ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—é —Ñ–∞–π–ª–æ–≤ –∏ —Ç–µ—Å—Ç–∞–º.
